<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) on Fri Sep 13 18:45:45 PDT 2024 -->
<title>PNP</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2024-09-13">
<meta name="description" content="declaration: package: algorithms.imageProcessing.transform, class: PNP">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">algorithms.imageProcessing.transform</a></div>
<h1 title="Class PNP" class="title">Class PNP</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">algorithms.imageProcessing.transform.PNP</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">PNP</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">NOT READY FOR USE.
 iterative non-linear optimization using Levenberg-Marquardt algorithm
 to minimize the re-projection error of perspective projection
 in "perspective-n-point".
 
 L-M is guaranteed to converge to eventually find an improvement, 
 because an update with a sufficiently small magnitude and a negative scalar 
 product with the gradient is guaranteed to do so.
 
 TODO: consider implementing the Szeliski 2010 chapter 6 equations (6.44)-(6.47)
 
 NOTE: this implementation uses euler rotation angles and singularity safe
 updates, but future versions could consider using quaternions.
 This from Szeliski 2010:
   ..."Quaternions, on the other hand, are better if you want to keep track of 
   a smoothly moving camera, since there are no discontinuities in the 
   representation. It is also easier to interpolate between rotations and to 
   chain rigid transformations (Murray, Li, and Sastry 1994; Bregler and Malik 1998).
   My usual preference is to use quaternions, but to update their estimates 
   using an incremental rotation, as described in Section 6.2.2."</div>
<dl class="notes">
<dt>Author:</dt>
<dd>nichole</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">PNP</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static double[][]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#calculateJ(double%5B%5D%5B%5D,double%5B%5D,double%5B%5D)" class="member-name-link">calculateJ</a><wbr>(double[][]&nbsp;worldC,
 double[]&nbsp;h,
 double[]&nbsp;thetas)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">calculate J for extrinsic parameters in solving pose</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static double[][]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#calculateJF(double%5B%5D%5B%5D,double%5B%5D)" class="member-name-link">calculateJF</a><wbr>(double[][]&nbsp;worldC,
 double[]&nbsp;h)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">
     J_f = df/dh 
         where f is the world point transformed by the homography h.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#calculateJF(double%5B%5D,double%5B%5D,double%5B%5D%5B%5D)" class="member-name-link">calculateJF</a><wbr>(double[]&nbsp;worldC,
 double[]&nbsp;h,
 double[][]&nbsp;outJF)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static double[][]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#calculateJG(double%5B%5D)" class="member-name-link">calculateJG</a><wbr>(double[]&nbsp;thetas)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">
     J_g = dh/dp 
         where h is the 2-D projection matrix of size 3x3 as
         2 columns of rotation and last column is translation</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static double</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#evaluateObjective(double%5B%5D)" class="member-name-link">evaluateObjective</a><wbr>(double[]&nbsp;bMinusFGP)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">evaluate the objective (|| b − f (g (p)) ||_2)^2
 eqn (21)</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#solveForPose(double%5B%5D%5B%5D,double%5B%5D%5B%5D,algorithms.imageProcessing.transform.Camera.CameraIntrinsicParameters,algorithms.imageProcessing.transform.Camera.CameraExtrinsicParameters,int)" class="member-name-link">solveForPose</a><wbr>(double[][]&nbsp;imageC,
 double[][]&nbsp;worldC,
 <a href="Camera.CameraIntrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraIntrinsicParameters</a>&nbsp;kIntr,
 <a href="Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&nbsp;kExtr,
 int&nbsp;nMaxIter)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">NOT YET TESTED.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#solveForPose(double%5B%5D%5B%5D,double%5B%5D%5B%5D,algorithms.imageProcessing.transform.Camera.CameraIntrinsicParameters,java.util.List,int)" class="member-name-link">solveForPose</a><wbr>(double[][]&nbsp;imageC,
 double[][]&nbsp;worldC,
 <a href="Camera.CameraIntrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraIntrinsicParameters</a>&nbsp;kIntr,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;&nbsp;kExtrs,
 int&nbsp;nMaxIter)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">NOT YET TESTED.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#solveForPose(double%5B%5D%5B%5D,double%5B%5D%5B%5D,java.util.List,java.util.List,int)" class="member-name-link">solveForPose</a><wbr>(double[][]&nbsp;imageC,
 double[][]&nbsp;worldC,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Camera.CameraIntrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraIntrinsicParameters</a>&gt;&nbsp;kIntrs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;&nbsp;kExtrs,
 int&nbsp;nMaxIter)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">NOT YET TESTED.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>(package private) static double[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#transformToCamera(double%5B%5D%5B%5D,double%5B%5D)" class="member-name-link">transformToCamera</a><wbr>(double[][]&nbsp;worldC,
 double[]&nbsp;h)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">use the homography matrix to the project the world reference points
 to 2D point coordinates in the camera frame.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>PNP</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">PNP</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="solveForPose(double[][],double[][],algorithms.imageProcessing.transform.Camera.CameraIntrinsicParameters,java.util.List,int)">
<h3>solveForPose</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;</span>&nbsp;<span class="element-name">solveForPose</span><wbr><span class="parameters">(double[][]&nbsp;imageC,
 double[][]&nbsp;worldC,
 <a href="Camera.CameraIntrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraIntrinsicParameters</a>&nbsp;kIntr,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;&nbsp;kExtrs,
 int&nbsp;nMaxIter)</span>
                                                           throws <span class="exceptions">no.uib.cipr.matrix.NotConvergedException,
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">NOT YET TESTED.
 given the fixed intrinsic camera calibration for the single camera
 used in all images,
 and given the initial estimates
 of extrinsic camera parameters for each image, use the 
 Levenberg-Marquardt algorithm to improve the extrinsic camera parameters rotation and translation 
 by minimizing the re-projection error using feature 
 measurements and their world coordinates.
 NOTE: this is a dense Hessian matrix solver, not the sparse Hessian
 matrix bundle adjustment which is in BundleAdjustment.java.
 <pre>
     References:
     
     Gordon Wetzstein lecture notes, Stanford University, EE 267 Virtual Reality, 
     "Course Notes: 6-DOF Pose Tracking with the VRduino",
       https://stanford.edu/class/ee267/notes/ee267_notes_tracking.pdf
     
     Danping Zou lecture notes, Shanghai Jiao Tong University,
     EE382-Visual localization &amp; Perception, “Lecture 08- Nonlinear least square &amp; RANSAC”
     http://drone.sjtu.edu.cn/dpzou/teaching/course/lecture07-08-nonlinear_least_square_ransac.pdf

     Szeliski 2010, "Computer Vision: Algorithms and Applications", Chapter 6
     
 </pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>imageC</code> - observed features in one image followed by the same observed
 features in the next image, etc. format of double array with
 first dimension length 3 (for x, y, z) and the second dimension length
 of nFeatures * mImages.</dd>
<dd><code>worldC</code> - world scene features in format of double array with
 first dimension length 3 (for x, y, z) and the second dimension length
 of nFeatures.</dd>
<dd><code>kIntr</code> - </dd>
<dd><code>kExtrs</code> - </dd>
<dd><code>nMaxIter</code> - </dd>
<dt>Returns:</dt>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if there is an error in use of MPSolver during the
 removal of radial distortion, a generic exception is thrown with the
 error message from the MPSolve documentation.</dd>
<dd><code>no.uib.cipr.matrix.NotConvergedException</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="solveForPose(double[][],double[][],java.util.List,java.util.List,int)">
<h3>solveForPose</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;</span>&nbsp;<span class="element-name">solveForPose</span><wbr><span class="parameters">(double[][]&nbsp;imageC,
 double[][]&nbsp;worldC,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Camera.CameraIntrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraIntrinsicParameters</a>&gt;&nbsp;kIntrs,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html" title="class or interface in java.util" class="external-link">List</a>&lt;<a href="Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;&nbsp;kExtrs,
 int&nbsp;nMaxIter)</span>
                                                           throws <span class="exceptions">no.uib.cipr.matrix.NotConvergedException,
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">NOT YET TESTED.
 given the fixed intrinsic camera calibration and the initial estimates
 of extrinsic camera parameters as lists of the same size, each item being
 for a single image, use the 
 Levenberg-Marquardt algorithm to improve the extrinsic camera parameters rotation and translation 
 by minimizing the re-projection error using feature 
 measurements and their world coordinates.
 NOTE: this is a dense Hessian matrix solver, not the sparse Hessian
 matrix bundle adjustment which is in BundleAdjustment.java.
 <pre>
     References:
     
     Gordon Wetzstein lecture notes, Stanford University, EE 267 Virtual Reality, 
     "Course Notes: 6-DOF Pose Tracking with the VRduino",
       https://stanford.edu/class/ee267/notes/ee267_notes_tracking.pdf
     
     Danping Zou lecture notes, Shanghai Jiao Tong University,
     EE382-Visual localization &amp; Perception, “Lecture 08- Nonlinear least square &amp; RANSAC”
     http://drone.sjtu.edu.cn/dpzou/teaching/course/lecture07-08-nonlinear_least_square_ransac.pdf

     Szeliski 2010, "Computer Vision: Algorithms and Applications", Chapter 6
     
 </pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>imageC</code> - </dd>
<dd><code>worldC</code> - </dd>
<dd><code>kIntrs</code> - </dd>
<dd><code>kExtrs</code> - </dd>
<dd><code>nMaxIter</code> - </dd>
<dt>Returns:</dt>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if there is an error in use of MPSolver during the
 removal of radial distortion, a generic exception is thrown with the
 error message from the MPSolve documentation.</dd>
<dd><code>no.uib.cipr.matrix.NotConvergedException</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="solveForPose(double[][],double[][],algorithms.imageProcessing.transform.Camera.CameraIntrinsicParameters,algorithms.imageProcessing.transform.Camera.CameraExtrinsicParameters,int)">
<h3>solveForPose</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a></span>&nbsp;<span class="element-name">solveForPose</span><wbr><span class="parameters">(double[][]&nbsp;imageC,
 double[][]&nbsp;worldC,
 <a href="Camera.CameraIntrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraIntrinsicParameters</a>&nbsp;kIntr,
 <a href="Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&nbsp;kExtr,
 int&nbsp;nMaxIter)</span>
                                                     throws <span class="exceptions">no.uib.cipr.matrix.NotConvergedException,
<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">NOT YET TESTED.
 given the camera intrinsic calibration  
 and initial estimates for extrinsic camera parameters for an image, use the 
 Levenberg-Marquardt algorithm to improve the extrinsic camera parameters rotation and translation 
 estimates by minimizing the re-projection error using feature 
 measurements and their world coordinates.
 NOTE: this is a dense Hessian matrix solver, not the sparse Hessian
 matrix bundle adjustment which is in BundleAdjustment.java.
 <pre>
     References:
     
     Gordon Wetzstein lecture notes, Stanford University, EE 267 Virtual Reality, 
     "Course Notes: 6-DOF Pose Tracking with the VRduino",
       https://stanford.edu/class/ee267/notes/ee267_notes_tracking.pdf
     
     Danping Zou lecture notes, Shanghai Jiao Tong University,
     EE382-Visual localization &amp; Perception, “Lecture 08- Nonlinear least square &amp; RANSAC”
     http://drone.sjtu.edu.cn/dpzou/teaching/course/lecture07-08-nonlinear_least_square_ransac.pdf

     Szeliski 2010, "Computer Vision: Algorithms and Applications", Chapter 6
     
 </pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>imageC</code> - </dd>
<dd><code>worldC</code> - </dd>
<dd><code>kIntr</code> - </dd>
<dd><code>kExtr</code> - </dd>
<dd><code>nMaxIter</code> - </dd>
<dt>Returns:</dt>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code> - if there is an error in use of MPSolver during the
 removal of radial distortion, a generic exception is thrown with the
 error message from the MPSolve documentation.</dd>
<dd><code>no.uib.cipr.matrix.NotConvergedException</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="transformToCamera(double[][],double[])">
<h3>transformToCamera</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type">double[]</span>&nbsp;<span class="element-name">transformToCamera</span><wbr><span class="parameters">(double[][]&nbsp;worldC,
 double[]&nbsp;h)</span></div>
<div class="block">use the homography matrix to the project the world reference points
 to 2D point coordinates in the camera frame.  eqn (20).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>worldC</code> - </dd>
<dd><code>h</code> - </dd>
<dt>Returns:</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="evaluateObjective(double[])">
<h3>evaluateObjective</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">evaluateObjective</span><wbr><span class="parameters">(double[]&nbsp;bMinusFGP)</span></div>
<div class="block">evaluate the objective (|| b − f (g (p)) ||_2)^2
 eqn (21)</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>bMinusFGP</code> - array b - f(g(p))</dd>
<dt>Returns:</dt>
</dl>
</section>
</li>
<li>
<section class="detail" id="calculateJ(double[][],double[],double[])">
<h3>calculateJ</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type">double[][]</span>&nbsp;<span class="element-name">calculateJ</span><wbr><span class="parameters">(double[][]&nbsp;worldC,
 double[]&nbsp;h,
 double[]&nbsp;thetas)</span></div>
<div class="block">calculate J for extrinsic parameters in solving pose
     <pre> 
     Sect 6.1 of George Wetzstein Stanford Course Notes 
     for EE 267 Virtual Reality, 6-DOF Pose Tracking with the VRduino  
     </pre>
     <pre>
     J = J_f * J_g where p is the parameter vector [thetas, translations]
                   where J_g = dh/dp 
                         where h is the 2-D projection matrix of size 3x3 as
                         2 columns of rotation and last column is translation
                   and 
                   where J_f = df/dh 
                         where f is the world point transformed by the homography h.
         J = df/dp
     </pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>worldC</code> - </dd>
<dd><code>h</code> - </dd>
<dd><code>thetas</code> - </dd>
<dt>Returns:</dt>
<dd>matrix size (2N) X 6</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="calculateJF(double[][],double[])">
<h3>calculateJF</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type">double[][]</span>&nbsp;<span class="element-name">calculateJF</span><wbr><span class="parameters">(double[][]&nbsp;worldC,
 double[]&nbsp;h)</span></div>
<div class="block"><pre>
     J_f = df/dh 
         where f is the world point transformed by the homography h.
     </pre>
     <pre> 
     Sect 6.1 of George Wetzstein Stanford Course Notes 
     for EE 267 Virtual Reality, 6-DOF Pose Tracking with the VRduino  
     </pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>worldC</code> - </dd>
<dd><code>h</code> - </dd>
<dt>Returns:</dt>
<dd>a (2*n)X9 matrix</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="calculateJF(double[],double[],double[][])">
<h3>calculateJF</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">calculateJF</span><wbr><span class="parameters">(double[]&nbsp;worldC,
 double[]&nbsp;h,
 double[][]&nbsp;outJF)</span></div>
</section>
</li>
<li>
<section class="detail" id="calculateJG(double[])">
<h3>calculateJG</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type">double[][]</span>&nbsp;<span class="element-name">calculateJG</span><wbr><span class="parameters">(double[]&nbsp;thetas)</span></div>
<div class="block"><pre>
     J_g = dh/dp 
         where h is the 2-D projection matrix of size 3x3 as
         2 columns of rotation and last column is translation
    </pre>
    <pre> 
     Sect 6.1 of George Wetzstein Stanford Course Notes 
     for EE 267 Virtual Reality, 6-DOF Pose Tracking with the VRduino  
     </pre></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>thetas</code> - </dd>
<dt>Returns:</dt>
<dd>9X6 matrix</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
