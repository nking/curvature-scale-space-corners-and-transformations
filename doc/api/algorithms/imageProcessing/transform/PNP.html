<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_131) on Mon Mar 14 09:05:49 PDT 2022 -->
<title>PNP</title>
<meta name="date" content="2022-03-14">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PNP";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":9,"i3":9,"i4":9,"i5":9,"i6":9,"i7":9,"i8":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../algorithms/imageProcessing/transform/NaNException.html" title="class in algorithms.imageProcessing.transform"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../algorithms/imageProcessing/transform/Reconstruction.html" title="class in algorithms.imageProcessing.transform"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?algorithms/imageProcessing/transform/PNP.html" target="_top">Frames</a></li>
<li><a href="PNP.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">algorithms.imageProcessing.transform</div>
<h2 title="Class PNP" class="title">Class PNP</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>algorithms.imageProcessing.transform.PNP</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">PNP</span>
extends java.lang.Object</pre>
<div class="block">iterative non-linear optimization using Levenberg-Marquardt algorithm
 to minimize the re-projection error of perspective projection
 in "perspective-n-point".
 
 L-M is guaranteed to converge to eventually find an improvement, 
 because an update with a sufficiently small magnitude and a negative scalar 
 product with the gradient is guaranteed to do so.
 
 TODO: consider implementing the Szeliski 2010 chapter 6 equations (6.44)-(6.47)
 
 NOTE: this implementation uses euler rotation angles and singularity safe
 updates, but future versions could consider using quaternions.
 This from Szeliski 2010:
   ..."Quaternions, on the other hand, are better if you want to keep track of 
   a smoothly moving camera, since there are no discontinuities in the 
   representation. It is also easier to interpolate between rotations and to 
   chain rigid transformations (Murray, Li, and Sastry 1994; Bregler and Malik 1998).
   My usual preference is to use quaternions, but to update their estimates 
   using an incremental rotation, as described in Section 6.2.2."</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>nichole</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../algorithms/imageProcessing/transform/PNP.html#PNP--">PNP</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>(package private) static double[][]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../algorithms/imageProcessing/transform/PNP.html#calculateJ-double:A:A-double:A-double:A-">calculateJ</a></span>(double[][]&nbsp;worldC,
          double[]&nbsp;h,
          double[]&nbsp;thetas)</code>
<div class="block">calculate J for extrinsic parameters in solving pose</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>(package private) static double[][]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../algorithms/imageProcessing/transform/PNP.html#calculateJF-double:A:A-double:A-">calculateJF</a></span>(double[][]&nbsp;worldC,
           double[]&nbsp;h)</code>
<div class="block">
     J_f = df/dh 
         where f is the world point transformed by the homography h.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>(package private) static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../algorithms/imageProcessing/transform/PNP.html#calculateJF-double:A-double:A-double:A:A-">calculateJF</a></span>(double[]&nbsp;worldC,
           double[]&nbsp;h,
           double[][]&nbsp;outJF)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>(package private) static double[][]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../algorithms/imageProcessing/transform/PNP.html#calculateJG-double:A-">calculateJG</a></span>(double[]&nbsp;thetas)</code>
<div class="block">
     J_g = dh/dp 
         where h is the 2-D projection matrix of size 3x3 as
         2 columns of rotation and last column is translation</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>(package private) static double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../algorithms/imageProcessing/transform/PNP.html#evaluateObjective-double:A-">evaluateObjective</a></span>(double[]&nbsp;bMinusFGP)</code>
<div class="block">evaluate the objective (|| b − f (g (p)) ||_2)^2
 eqn (21)</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static <a href="../../../algorithms/imageProcessing/transform/Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../algorithms/imageProcessing/transform/PNP.html#solveForPose-double:A:A-double:A:A-algorithms.imageProcessing.transform.Camera.CameraIntrinsicParameters-algorithms.imageProcessing.transform.Camera.CameraExtrinsicParameters-double:A-int-boolean-">solveForPose</a></span>(double[][]&nbsp;imageC,
            double[][]&nbsp;worldC,
            <a href="../../../algorithms/imageProcessing/transform/Camera.CameraIntrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraIntrinsicParameters</a>&nbsp;kIntr,
            <a href="../../../algorithms/imageProcessing/transform/Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&nbsp;kExtr,
            double[]&nbsp;kRadial,
            int&nbsp;nMaxIter,
            boolean&nbsp;useR2R4)</code>
<div class="block">NOT YET TESTED.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static java.util.List&lt;<a href="../../../algorithms/imageProcessing/transform/Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../algorithms/imageProcessing/transform/PNP.html#solveForPose-double:A:A-double:A:A-algorithms.imageProcessing.transform.Camera.CameraIntrinsicParameters-java.util.List-double:A-int-boolean-">solveForPose</a></span>(double[][]&nbsp;imageC,
            double[][]&nbsp;worldC,
            <a href="../../../algorithms/imageProcessing/transform/Camera.CameraIntrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraIntrinsicParameters</a>&nbsp;kIntr,
            java.util.List&lt;<a href="../../../algorithms/imageProcessing/transform/Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;&nbsp;kExtrs,
            double[]&nbsp;kRadial,
            int&nbsp;nMaxIter,
            boolean&nbsp;useR2R4)</code>
<div class="block">NOT YET TESTED.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static java.util.List&lt;<a href="../../../algorithms/imageProcessing/transform/Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../algorithms/imageProcessing/transform/PNP.html#solveForPose-double:A:A-double:A:A-java.util.List-java.util.List-double:A-int-boolean-">solveForPose</a></span>(double[][]&nbsp;imageC,
            double[][]&nbsp;worldC,
            java.util.List&lt;<a href="../../../algorithms/imageProcessing/transform/Camera.CameraIntrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraIntrinsicParameters</a>&gt;&nbsp;kIntrs,
            java.util.List&lt;<a href="../../../algorithms/imageProcessing/transform/Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;&nbsp;kExtrs,
            double[]&nbsp;kRadial,
            int&nbsp;nMaxIter,
            boolean&nbsp;useR2R4)</code>
<div class="block">NOT YET TESTED.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>(package private) static double[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../algorithms/imageProcessing/transform/PNP.html#transformToCamera-double:A:A-double:A-">transformToCamera</a></span>(double[][]&nbsp;worldC,
                 double[]&nbsp;h)</code>
<div class="block">use the homography matrix to the project the world reference points
 to 2D point coordinates in the camera frame.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="PNP--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>PNP</h4>
<pre>public&nbsp;PNP()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="solveForPose-double:A:A-double:A:A-algorithms.imageProcessing.transform.Camera.CameraIntrinsicParameters-java.util.List-double:A-int-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>solveForPose</h4>
<pre>public static&nbsp;java.util.List&lt;<a href="../../../algorithms/imageProcessing/transform/Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;&nbsp;solveForPose(double[][]&nbsp;imageC,
                                                                            double[][]&nbsp;worldC,
                                                                            <a href="../../../algorithms/imageProcessing/transform/Camera.CameraIntrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraIntrinsicParameters</a>&nbsp;kIntr,
                                                                            java.util.List&lt;<a href="../../../algorithms/imageProcessing/transform/Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;&nbsp;kExtrs,
                                                                            double[]&nbsp;kRadial,
                                                                            int&nbsp;nMaxIter,
                                                                            boolean&nbsp;useR2R4)
                                                                     throws no.uib.cipr.matrix.NotConvergedException,
                                                                            java.lang.Exception</pre>
<div class="block">NOT YET TESTED.
 given the fixed intrinsic camera calibration for the single camera
 used in all images,
 and given the initial estimates
 of extrinsic camera parameters for each image, use the 
 Levenberg-Marquardt algorithm to improve the extrinsic camera parameters rotation and translation 
 by minimizing the re-projection error using feature 
 measurements and their world coordinates.
 NOTE: this is a dense Hessian matrix solver, not the sparse Hessian
 matrix bundle adjustment which is in BundleAdjustment.java.
 <pre>
     References:
     
     Gordon Wetzstein lecture notes, Stanford University, EE 267 Virtual Reality, 
     "Course Notes: 6-DOF Pose Tracking with the VRduino",
       https://stanford.edu/class/ee267/notes/ee267_notes_tracking.pdf
     
     Danping Zou lecture notes, Shanghai Jiao Tong University,
     EE382-Visual localization & Perception, “Lecture 08- Nonlinear least square & RANSAC”
     http://drone.sjtu.edu.cn/dpzou/teaching/course/lecture07-08-nonlinear_least_square_ransac.pdf

     Szeliski 2010, "Computer Vision: Algorithms and Applications", Chapter 6
     
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>imageC</code> - observed features in one image followed by the same observed
 features in the next image, etc. format of double array with
 first dimension length 3 (for x, y, z) and the second dimension length
 of nFeatures * mImages.</dd>
<dd><code>worldC</code> - world scene features in format of double array with
 first dimension length 3 (for x, y, z) and the second dimension length
 of nFeatures.</dd>
<dd><code>kIntr</code> - </dd>
<dd><code>kExtrs</code> - </dd>
<dd><code>kRadial</code> - </dd>
<dd><code>nMaxIter</code> - </dd>
<dd><code>useR2R4</code> - use radial distortion function from Ma et al. 2004 for model #4 in Table 2,
        f(r) = 1 +k1*r^2 + k2*r^4 if true,
        else use model #3 f(r) = 1 +k1*r + k2*r^2.
        note that if rCoeffs is null or empty, no radial distortion is removed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if there is an error in use of MPSolver during the
 removal of radial distortion, a generic exception is thrown with the
 error message from the MPSolve documentation.</dd>
<dd><code>no.uib.cipr.matrix.NotConvergedException</code></dd>
</dl>
</li>
</ul>
<a name="solveForPose-double:A:A-double:A:A-java.util.List-java.util.List-double:A-int-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>solveForPose</h4>
<pre>public static&nbsp;java.util.List&lt;<a href="../../../algorithms/imageProcessing/transform/Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;&nbsp;solveForPose(double[][]&nbsp;imageC,
                                                                            double[][]&nbsp;worldC,
                                                                            java.util.List&lt;<a href="../../../algorithms/imageProcessing/transform/Camera.CameraIntrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraIntrinsicParameters</a>&gt;&nbsp;kIntrs,
                                                                            java.util.List&lt;<a href="../../../algorithms/imageProcessing/transform/Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&gt;&nbsp;kExtrs,
                                                                            double[]&nbsp;kRadial,
                                                                            int&nbsp;nMaxIter,
                                                                            boolean&nbsp;useR2R4)
                                                                     throws no.uib.cipr.matrix.NotConvergedException,
                                                                            java.lang.Exception</pre>
<div class="block">NOT YET TESTED.
 given the fixed intrinsic camera calibration and the initial estimates
 of extrinsic camera parameters as lists of the same size, each item being
 for a single image, use the 
 Levenberg-Marquardt algorithm to improve the extrinsic camera parameters rotation and translation 
 by minimizing the re-projection error using feature 
 measurements and their world coordinates.
 NOTE: this is a dense Hessian matrix solver, not the sparse Hessian
 matrix bundle adjustment which is in BundleAdjustment.java.
 <pre>
     References:
     
     Gordon Wetzstein lecture notes, Stanford University, EE 267 Virtual Reality, 
     "Course Notes: 6-DOF Pose Tracking with the VRduino",
       https://stanford.edu/class/ee267/notes/ee267_notes_tracking.pdf
     
     Danping Zou lecture notes, Shanghai Jiao Tong University,
     EE382-Visual localization & Perception, “Lecture 08- Nonlinear least square & RANSAC”
     http://drone.sjtu.edu.cn/dpzou/teaching/course/lecture07-08-nonlinear_least_square_ransac.pdf

     Szeliski 2010, "Computer Vision: Algorithms and Applications", Chapter 6
     
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>imageC</code> - </dd>
<dd><code>worldC</code> - </dd>
<dd><code>kIntrs</code> - </dd>
<dd><code>kExtrs</code> - </dd>
<dd><code>kRadial</code> - </dd>
<dd><code>nMaxIter</code> - </dd>
<dd><code>useR2R4</code> - use radial distortion function from Ma et al. 2004 for model #4 in Table 2,
        f(r) = 1 +k1*r^2 + k2*r^4 if true,
        else use model #3 f(r) = 1 +k1*r + k2*r^2.
        note that if rCoeffs is null or empty, no radial distortion is removed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if there is an error in use of MPSolver during the
 removal of radial distortion, a generic exception is thrown with the
 error message from the MPSolve documentation.</dd>
<dd><code>no.uib.cipr.matrix.NotConvergedException</code></dd>
</dl>
</li>
</ul>
<a name="solveForPose-double:A:A-double:A:A-algorithms.imageProcessing.transform.Camera.CameraIntrinsicParameters-algorithms.imageProcessing.transform.Camera.CameraExtrinsicParameters-double:A-int-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>solveForPose</h4>
<pre>public static&nbsp;<a href="../../../algorithms/imageProcessing/transform/Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&nbsp;solveForPose(double[][]&nbsp;imageC,
                                                            double[][]&nbsp;worldC,
                                                            <a href="../../../algorithms/imageProcessing/transform/Camera.CameraIntrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraIntrinsicParameters</a>&nbsp;kIntr,
                                                            <a href="../../../algorithms/imageProcessing/transform/Camera.CameraExtrinsicParameters.html" title="class in algorithms.imageProcessing.transform">Camera.CameraExtrinsicParameters</a>&nbsp;kExtr,
                                                            double[]&nbsp;kRadial,
                                                            int&nbsp;nMaxIter,
                                                            boolean&nbsp;useR2R4)
                                                     throws no.uib.cipr.matrix.NotConvergedException,
                                                            java.lang.Exception</pre>
<div class="block">NOT YET TESTED.
 given the camera intrinsic calibration  
 and initial estimates for extrinsic camera parameters for an image, use the 
 Levenberg-Marquardt algorithm to improve the extrinsic camera parameters rotation and translation 
 estimates by minimizing the re-projection error using feature 
 measurements and their world coordinates.
 NOTE: this is a dense Hessian matrix solver, not the sparse Hessian
 matrix bundle adjustment which is in BundleAdjustment.java.
 <pre>
     References:
     
     Gordon Wetzstein lecture notes, Stanford University, EE 267 Virtual Reality, 
     "Course Notes: 6-DOF Pose Tracking with the VRduino",
       https://stanford.edu/class/ee267/notes/ee267_notes_tracking.pdf
     
     Danping Zou lecture notes, Shanghai Jiao Tong University,
     EE382-Visual localization & Perception, “Lecture 08- Nonlinear least square & RANSAC”
     http://drone.sjtu.edu.cn/dpzou/teaching/course/lecture07-08-nonlinear_least_square_ransac.pdf

     Szeliski 2010, "Computer Vision: Algorithms and Applications", Chapter 6
     
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>imageC</code> - </dd>
<dd><code>worldC</code> - </dd>
<dd><code>kIntr</code> - </dd>
<dd><code>kExtr</code> - </dd>
<dd><code>kRadial</code> - </dd>
<dd><code>nMaxIter</code> - </dd>
<dd><code>useR2R4</code> - use radial distortion function from Ma et al. 2004 for model #4 in Table 2,
        f(r) = 1 +k1*r^2 + k2*r^4 if true,
        else use model #3 f(r) = 1 +k1*r + k2*r^2.
        note that if rCoeffs is null or empty, no radial distortion is removed.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if there is an error in use of MPSolver during the
 removal of radial distortion, a generic exception is thrown with the
 error message from the MPSolve documentation.</dd>
<dd><code>no.uib.cipr.matrix.NotConvergedException</code></dd>
</dl>
</li>
</ul>
<a name="transformToCamera-double:A:A-double:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transformToCamera</h4>
<pre>static&nbsp;double[]&nbsp;transformToCamera(double[][]&nbsp;worldC,
                                  double[]&nbsp;h)</pre>
<div class="block">use the homography matrix to the project the world reference points
 to 2D point coordinates in the camera frame.  eqn (20).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>worldC</code> - </dd>
<dd><code>h</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="evaluateObjective-double:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>evaluateObjective</h4>
<pre>static&nbsp;double&nbsp;evaluateObjective(double[]&nbsp;bMinusFGP)</pre>
<div class="block">evaluate the objective (|| b − f (g (p)) ||_2)^2
 eqn (21)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>bMinusFGP</code> - array b - f(g(p))</dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="calculateJ-double:A:A-double:A-double:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateJ</h4>
<pre>static&nbsp;double[][]&nbsp;calculateJ(double[][]&nbsp;worldC,
                             double[]&nbsp;h,
                             double[]&nbsp;thetas)</pre>
<div class="block">calculate J for extrinsic parameters in solving pose
     <pre> 
     Sect 6.1 of George Wetzstein Stanford Course Notes 
     for EE 267 Virtual Reality, 6-DOF Pose Tracking with the VRduino  
     </pre>
     <pre>
     J = J_f * J_g where p is the parameter vector [thetas, translations]
                   where J_g = dh/dp 
                         where h is the 2-D projection matrix of size 3x3 as
                         2 columns of rotation and last column is translation
                   and 
                   where J_f = df/dh 
                         where f is the world point transformed by the homography h.
         J = df/dp
     </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>worldC</code> - </dd>
<dd><code>h</code> - </dd>
<dd><code>thetas</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>matrix size (2N) X 6</dd>
</dl>
</li>
</ul>
<a name="calculateJF-double:A:A-double:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateJF</h4>
<pre>static&nbsp;double[][]&nbsp;calculateJF(double[][]&nbsp;worldC,
                              double[]&nbsp;h)</pre>
<div class="block"><pre>
     J_f = df/dh 
         where f is the world point transformed by the homography h.
     </pre>
     <pre> 
     Sect 6.1 of George Wetzstein Stanford Course Notes 
     for EE 267 Virtual Reality, 6-DOF Pose Tracking with the VRduino  
     </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>worldC</code> - </dd>
<dd><code>h</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a (2*n)X9 matrix</dd>
</dl>
</li>
</ul>
<a name="calculateJF-double:A-double:A-double:A:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateJF</h4>
<pre>static&nbsp;void&nbsp;calculateJF(double[]&nbsp;worldC,
                        double[]&nbsp;h,
                        double[][]&nbsp;outJF)</pre>
</li>
</ul>
<a name="calculateJG-double:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>calculateJG</h4>
<pre>static&nbsp;double[][]&nbsp;calculateJG(double[]&nbsp;thetas)</pre>
<div class="block"><pre>
     J_g = dh/dp 
         where h is the 2-D projection matrix of size 3x3 as
         2 columns of rotation and last column is translation
    </pre>
    <pre> 
     Sect 6.1 of George Wetzstein Stanford Course Notes 
     for EE 267 Virtual Reality, 6-DOF Pose Tracking with the VRduino  
     </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>thetas</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>9X6 matrix</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../algorithms/imageProcessing/transform/NaNException.html" title="class in algorithms.imageProcessing.transform"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../algorithms/imageProcessing/transform/Reconstruction.html" title="class in algorithms.imageProcessing.transform"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?algorithms/imageProcessing/transform/PNP.html" target="_top">Frames</a></li>
<li><a href="PNP.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
