<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>PostLineThinnerCorrections.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Jacoco Report</a> &gt; <a href="index.source.html" class="el_package">algorithms.imageProcessing</a> &gt; <span class="el_source">PostLineThinnerCorrections.java</span></div><h1>PostLineThinnerCorrections.java</h1><pre class="source lang-java linenums">package algorithms.imageProcessing;

import algorithms.CountingSort;
import algorithms.misc.MiscDebug;
import algorithms.util.PairInt;
import java.util.Arrays;
import java.util.HashSet;
import java.util.LinkedHashSet;
import java.util.Set;
import java.util.logging.Logger;

/**
 *
 * @author nichole
 */
<span class="fc" id="L16">public class PostLineThinnerCorrections {</span>
    
<span class="fc" id="L18">    private Logger log = Logger.getLogger(this.getClass().getName());</span>
    
<span class="fc" id="L20">    protected static final int[] fourNeighborsX = new int[]{0,  1,  0,  -1};</span>
<span class="fc" id="L21">    protected static final int[] fourNeighborsY = new int[]{-1, 0,  1,   0};</span>
    
<span class="fc" id="L23">    protected static final int[] eightNeighborsX = </span>
        new int[]{-1, -1,  0,  1, 1, 1, 0, -1};
<span class="fc" id="L25">    protected static final int[] eightNeighborsY = </span>
        new int[]{ 0, -1, -1, -1, 0, 1, 1,  1};
    
<span class="fc" id="L28">    protected GreyscaleImage edgeGuideImage = null;</span>
    
    public void setEdgeGuideImage(final GreyscaleImage gradientXY) {
<span class="fc" id="L31">        this.edgeGuideImage = gradientXY;</span>
<span class="fc" id="L32">    }</span>
    
    public void correctForArtifacts(GreyscaleImage input) {
           
<span class="fc bfc" id="L36" title="All 2 branches covered.">        if (edgeGuideImage != null) {</span>
<span class="pc bpc" id="L37" title="1 of 2 branches missed.">            if (input.getXRelativeOffset() != edgeGuideImage.getXRelativeOffset()) {</span>
<span class="nc" id="L38">                throw new IllegalStateException(</span>
                    &quot;input and edgeGuideImage must have same x offsets&quot;);
            }
<span class="pc bpc" id="L41" title="1 of 2 branches missed.">            if (input.getYRelativeOffset() != edgeGuideImage.getYRelativeOffset()) {</span>
<span class="nc" id="L42">                throw new IllegalStateException(</span>
                    &quot;input and edgeGuideImage must have same y offsets&quot;);
            }
<span class="pc bpc" id="L45" title="1 of 2 branches missed.">            if (input.getWidth() != edgeGuideImage.getWidth()) {</span>
<span class="nc" id="L46">                throw new IllegalStateException(</span>
                    &quot;input and edgeGuideImage must have same widths&quot;);
            }
<span class="pc bpc" id="L49" title="1 of 2 branches missed.">            if (input.getHeight() != edgeGuideImage.getHeight()) {</span>
<span class="nc" id="L50">                throw new IllegalStateException(</span>
                    &quot;input and edgeGuideImage must have same heights&quot;);
            }
        }
        
<span class="fc" id="L55">        ImageProcessor imageProcessor = new ImageProcessor();</span>
        
<span class="fc" id="L57">        final int w = input.getWidth();</span>
<span class="fc" id="L58">        final int h = input.getHeight();</span>
        
<span class="fc" id="L60">        Set&lt;PairInt&gt; points = imageProcessor.readNonZeroPixels(input);</span>
          
<span class="fc bfc" id="L62" title="All 2 branches covered.">        for (int i = 0; i &lt; 1; i++) {</span>
<span class="fc" id="L63">            straightenLines(points, w, h);</span>
        }
        
<span class="fc" id="L66">        correctForArtifacts(points, w, h);</span>
       
<span class="fc bfc" id="L68" title="All 2 branches covered.">        for (int i = 0; i &lt; 2; i++) {</span>
<span class="fc" id="L69">            straightenLines(points, w, h);</span>
        }
        
<span class="fc" id="L72">        correctForArtifacts(points, w, h);</span>

<span class="fc" id="L74">        imageProcessor.writeAsBinaryToImage(input, points);</span>

<span class="fc" id="L76">    }</span>
 
    public void correctForArtifacts(Set&lt;PairInt&gt; points, int w, int h) {
     
<span class="fc" id="L80">        correctForHoleArtifacts1_2_2(points, w, h);</span>
<span class="fc" id="L81">        correctForHoleArtifacts1_2_3(points, w, h);</span>
        
<span class="fc" id="L83">        correctForSingleHole_01(points, w, h);</span>
<span class="fc" id="L84">        correctForSingleHole_02(points, w, h);</span>
<span class="fc" id="L85">        correctForSingleHole_03(points, w, h);</span>
<span class="fc" id="L86">        correctForSingleHole_04(points, w, h);</span>
<span class="fc" id="L87">        correctForSingleHole_05(points, w, h);</span>
<span class="fc" id="L88">        correctForSingleHole_06(points, w, h);</span>
<span class="fc" id="L89">        correctForSingleHole_07(points, w, h);</span>
<span class="fc" id="L90">        correctForSingleHole_08(points, w, h);</span>
<span class="fc" id="L91">        correctForSingleHole_09(points, w, h);</span>
<span class="fc" id="L92">        correctForSingleHole_10(points, w, h);</span>
<span class="fc" id="L93">        correctForSingleHole_11(points, w, h);</span>
<span class="fc" id="L94">        correctForSingleHole_12(points, w, h);</span>

<span class="fc" id="L96">        correctForZigZag000_00(points, w, h);</span>
<span class="fc" id="L97">        correctForZigZag000_01(points, w, h);</span>
<span class="fc" id="L98">        correctForZigZag000_02(points, w, h);</span>
<span class="fc" id="L99">        correctForZigZag000_03(points, w, h);</span>
        
<span class="fc" id="L101">        correctForZigZag000_04(points, w, h);</span>
<span class="fc" id="L102">        correctForZigZag000_05(points, w, h);</span>
<span class="fc" id="L103">        correctForZigZag000_06(points, w, h);</span>
<span class="fc" id="L104">        correctForZigZag000_07(points, w, h);</span>
<span class="fc" id="L105">        correctForZigZag000_08(points, w, h);</span>
<span class="fc" id="L106">        correctForZigZag000_09(points, w, h);</span>

        //correctForHoleArtifacts1_1(points, w, h);       
<span class="fc" id="L109">        correctForHoleArtifacts1_2(points, w, h);</span>
<span class="fc" id="L110">        correctForHoleArtifacts1_2_1(points, w, h);</span>
<span class="fc" id="L111">        correctForHoleArtifacts1_2_4(points, w, h);</span>
<span class="fc" id="L112">        correctForHoleArtifacts1_2_5(points, w, h);</span>
<span class="fc" id="L113">        correctForHoleArtifacts1_2_6(points, w, h);</span>
<span class="fc" id="L114">        correctForHoleArtifacts1_2_7(points, w, h);</span>
<span class="fc" id="L115">        correctForHoleArtifacts1_3(points, w, h);</span>
        
<span class="fc" id="L117">        correctForZigZag00(points, w, h);</span>
<span class="fc" id="L118">        correctForZigZag00_0(points, w, h);</span>
<span class="fc" id="L119">        correctForZigZag00_0_00(points, w, h);</span>
<span class="fc" id="L120">        correctForZigZag00_0_01(points, w, h);</span>
<span class="fc" id="L121">        correctForZigZag00_0_0(points, w, h);</span>
<span class="fc" id="L122">        correctForZigZag00_0_1(points, w, h);</span>
<span class="fc" id="L123">        correctForZigZag00_0_2(points, w, h);</span>
<span class="fc" id="L124">        correctForZigZag00_1(points, w, h);</span>
<span class="fc" id="L125">        correctForZigZag00_2(points, w, h);</span>
<span class="fc" id="L126">        correctForZigZag00_3(points, w, h);</span>
<span class="fc" id="L127">        correctForZigZag00_5(points, w, h);</span>
<span class="fc" id="L128">        correctForZigZag00_6(points, w, h);</span>
<span class="fc" id="L129">        correctForZigZag00_7(points, w, h);</span>
<span class="fc" id="L130">        correctForZigZag00_8(points, w, h);</span>
<span class="fc" id="L131">        correctForZigZag00_9(points, w, h);</span>
<span class="fc" id="L132">        correctForZigZag00_10(points, w, h);</span>
                
<span class="fc" id="L134">        correctForZigZag00_4(points, w, h);</span>
        
<span class="fc" id="L136">        correctForZigZag00_11(points, w, h);</span>
<span class="fc" id="L137">        correctForZigZag00_12(points, w, h);</span>
<span class="fc" id="L138">        correctForZigZag00_13(points, w, h);</span>
      
<span class="fc" id="L140">        correctForTs(points, w, h);</span>
<span class="fc" id="L141">        correctForTs_0(points, w, h);</span>
<span class="fc" id="L142">        correctForTs_0_1(points, w, h);</span>
<span class="fc" id="L143">        correctForTs_0_2(points, w, h);</span>
<span class="fc" id="L144">        correctForTs_0_3(points, w, h);</span>
<span class="fc" id="L145">        correctForTs_1(points, w, h);</span>
<span class="fc" id="L146">        correctForTs_1_1(points, w, h);</span>
                
        // TODO: revisit, not sure this is always an artifact:
<span class="fc" id="L149">        correctForLine0(points, w, h);</span>
        
        // better edge extraction at the expense of unsharpening true corners:
<span class="fc" id="L152">        correctForLs_0(points, w, h);</span>
<span class="fc" id="L153">        correctForLs_1(points, w, h);        </span>
<span class="fc" id="L154">        correctForLs2_0(points, w, h);</span>
<span class="fc" id="L155">        correctForLs2_1(points, w, h);</span>
        
<span class="fc" id="L157">        correctForZigZag00_14(points, w, h);</span>
<span class="fc" id="L158">        correctForZigZag00_15(points, w, h);</span>
<span class="fc" id="L159">        correctForZigZag00_16(points, w, h);</span>
            
<span class="fc" id="L161">        correctForHoleArtifacts00_10(points, w, h);</span>
        
<span class="fc" id="L163">        correctForZigZag00_0_1(points, w, h);</span>
       
<span class="fc" id="L165">        correctForCorrectionCreatedSquares(points, w, h);</span>
      
<span class="fc" id="L167">        correctForZigZag000_04(points, w, h);</span>
<span class="fc" id="L168">        correctForZigZag000_07(points, w, h);</span>
        
<span class="fc" id="L170">        correctForLs_0(points, w, h);</span>
<span class="fc" id="L171">        correctForLs_1(points, w, h);</span>
<span class="fc" id="L172">        correctForLs_2(points, w, h); </span>
<span class="fc" id="L173">        correctForLs_3(points, w, h);</span>
<span class="fc" id="L174">        correctForLs2_0(points, w, h);</span>
<span class="fc" id="L175">        correctForLs2_1(points, w, h);</span>
        
<span class="fc" id="L177">        correctForTs_0(points, w, h);</span>
<span class="fc" id="L178">        correctForTs_0_1(points, w, h);</span>
<span class="fc" id="L179">        correctForTs_0_2(points, w, h);</span>
<span class="fc" id="L180">        correctForTs_0_3(points, w, h);</span>
<span class="fc" id="L181">        correctForTs_1(points, w, h);</span>
<span class="fc" id="L182">        correctForTs_1_1(points, w, h);</span>
        
<span class="fc" id="L184">        correctForZigZag00_17(points, w, h);</span>
        
<span class="fc" id="L186">        correctForExtCorner(points, w, h);</span>
        
        //correctForRemaining(points, w, h);
<span class="fc" id="L189">    }</span>
        
    private void correctForZigZag00(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
           0  0     #   2
        0  0  #  #      1
        0  #* #  0      0
           #  0  0     -1
        #              -2
       -1  0  1  2  3        
        */
        
<span class="fc" id="L203">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L204">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L205">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L206">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L209">        zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L210">        zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L211">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -2));</span>
<span class="fc" id="L212">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L214">        ones.add(new PairInt(-1, 2));</span>
<span class="fc" id="L215">        ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L216">        ones.add(new PairInt(1, 0)); ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L217">        ones.add(new PairInt(2, -1));</span>
<span class="fc" id="L218">        ones.add(new PairInt(3, -2));</span>
        
<span class="fc" id="L220">        changeToZeroes.add(new PairInt(0, 0));</span>
<span class="fc" id="L221">        changeToZeroes.add(new PairInt(1, -1));</span>
                    
<span class="fc" id="L223">        int nCorrections = 0;</span>
        
<span class="fc" id="L225">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L228">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L231">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L232">            Integer.toString(nCorrections));</span>
<span class="fc" id="L233">    }</span>
    
    private void correctForZigZag00_0_00(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
                   
        /*       
            0  0  0         2
            #  #  0         1
            0  #* 0         0
            0  #  #        -1
            0  0  0        -2
           -1  0  1  2  3        
        */
        
<span class="fc" id="L247">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L248">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L249">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L250">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L253">        zeroes.add(new PairInt(-1, 2)); zeroes.add(new PairInt(-1, 1)); </span>
<span class="fc" id="L254">        zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L255">        zeroes.add(new PairInt(0, 2)); zeroes.add(new PairInt(0, -2));        </span>
<span class="fc" id="L256">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, 0)); </span>
<span class="fc" id="L257">        zeroes.add(new PairInt(1, -1)); zeroes.add(new PairInt(1, -2));</span>
                
<span class="fc" id="L259">        ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L260">        ones.add(new PairInt(0, 1)); ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L261">        ones.add(new PairInt(1, 1));</span>
        
<span class="fc" id="L263">        changeToZeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L264">        changeToZeroes.add(new PairInt(0, 1));</span>
                    
<span class="fc" id="L266">        int nCorrections = 0;</span>
        
<span class="fc" id="L268">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L271">        reverseXs(zeroes, ones, changeToZeroes, changeToOnes);</span>

<span class="fc" id="L273">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L276">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L277">            Integer.toString(nCorrections));</span>
<span class="fc" id="L278">    }</span>
    
    private void correctForZigZag00_0_01(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*       
            0  0  0  #  0     1
            0  #  #* #  0     0
            0  #  0  0  0    -1
           -2 -1  0  1  2   
        */
        
<span class="fc" id="L290">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L291">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L292">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L293">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L296">        zeroes.add(new PairInt(-2, 1)); zeroes.add(new PairInt(-2, 0)); zeroes.add(new PairInt(-2, -1));</span>
<span class="fc" id="L297">        zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L298">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -1));        </span>
<span class="fc" id="L299">        zeroes.add(new PairInt(1, 1)); </span>
<span class="fc" id="L300">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0)); zeroes.add(new PairInt(2, -1));</span>
                
<span class="fc" id="L302">        ones.add(new PairInt(-1, 1)); ones.add(new PairInt(-1, 0));</span>
<span class="fc" id="L303">        ones.add(new PairInt(1, 0));  ones.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L305">        changeToZeroes.add(new PairInt(-1, 0));</span>
<span class="fc" id="L306">        changeToZeroes.add(new PairInt(1, 0));</span>
                    
<span class="fc" id="L308">        int nCorrections = 0;</span>
        
<span class="fc" id="L310">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L313">        reverseXs(zeroes, ones, changeToZeroes, changeToOnes);</span>

<span class="fc" id="L315">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L318">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L319">            Integer.toString(nCorrections));</span>
<span class="fc" id="L320">    }</span>
    
    private void correctForZigZag00_0(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
               0  0     #   2
               0  #  #      1
            0  #* #  0      0
               #  0  0     -1
               #           -2
           -1  0  1  2  3        
        */
        
<span class="fc" id="L334">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L335">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L336">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L337">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L340">        zeroes.add(new PairInt(-1, 0));</span>
<span class="fc" id="L341">        zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L342">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -2));</span>
<span class="fc" id="L343">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L345">        ones.add(new PairInt(0, 2)); ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L346">        ones.add(new PairInt(1, 0)); ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L347">        ones.add(new PairInt(2, -1));</span>
<span class="fc" id="L348">        ones.add(new PairInt(3, -2));</span>
        
<span class="fc" id="L350">        changeToZeroes.add(new PairInt(1, 0));</span>
                    
<span class="fc" id="L352">        int nCorrections = 0;</span>
        
<span class="fc" id="L354">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L357">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L360">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L361">            Integer.toString(nCorrections));</span>
<span class="fc" id="L362">    }</span>
    
    private void correctForZigZag00_0_0(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
               0  0         2
               0  #  #  #   1
            0  #* #  0      0
               #  0  0     -1
               #           -2
           -1  0  1  2  3        
        */
<span class="fc" id="L375">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L376">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L377">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L378">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L381">        zeroes.add(new PairInt(-1, 0));</span>
<span class="fc" id="L382">        zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L383">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -2));</span>
<span class="fc" id="L384">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L386">        ones.add(new PairInt(0, 2)); ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L387">        ones.add(new PairInt(1, 0)); ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L388">        ones.add(new PairInt(2, -1));</span>
<span class="fc" id="L389">        ones.add(new PairInt(3, -1));</span>
        
<span class="fc" id="L391">        changeToZeroes.add(new PairInt(1, 0));</span>
                    
<span class="fc" id="L393">        int nCorrections = 0;</span>
        
<span class="fc" id="L395">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L398">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L401">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L402">            Integer.toString(nCorrections));</span>
<span class="fc" id="L403">    }</span>
    
    private void correctForZigZag00_0_1(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
               0            2
               0  #  #      1
            0  #* #  0      0
            0  #  0  0     -1
               0           -2
           -1  0  1  2  3        
        */
        
<span class="fc" id="L417">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L418">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L419">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L420">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L423">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0));</span>
<span class="fc" id="L424">        zeroes.add(new PairInt(0, 2));  zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L425">        zeroes.add(new PairInt(1, 1));</span>
<span class="fc" id="L426">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L428">        ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L429">        ones.add(new PairInt(1, 0)); ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L430">        ones.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L432">        changeToZeroes.add(new PairInt(1, 0));</span>
                    
<span class="fc" id="L434">        int nCorrections = 0;</span>
        
<span class="fc" id="L436">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L439">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L442">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L443">            Integer.toString(nCorrections));</span>
<span class="fc" id="L444">    }</span>
    
    private void correctForZigZag00_0_2(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
               0  0  0      2
               0  #&lt; #      1
            #  #* #  0      0
            0  #  0        -1
                           -2
           -1  0  1  2  3        
        */
<span class="fc" id="L457">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L458">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L459">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L460">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L463">        zeroes.add(new PairInt(-1, 1));</span>
<span class="fc" id="L464">        zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L465">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -2));</span>
<span class="fc" id="L466">        zeroes.add(new PairInt(2, 0)); zeroes.add(new PairInt(2, -2));</span>
        
<span class="fc" id="L468">        ones.add(new PairInt(-1, 0));</span>
<span class="fc" id="L469">        ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L470">        ones.add(new PairInt(1, 0)); ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L471">        ones.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L473">        changeToZeroes.add(new PairInt(1, -1));</span>
                    
<span class="fc" id="L475">        int nCorrections = 0;</span>
        
<span class="fc" id="L477">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L480">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L483">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L484">            Integer.toString(nCorrections));</span>
<span class="fc" id="L485">    }</span>
    
    /**
     * note, this one diminishes corner to make an unambiguous thinned section
     * @param points
     * @param imageWidth
     * @param imageHeight 
     */
    private void correctForRemaining(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
            0  0  0         2
            0  #&lt; #         1
            0  #* 0         0
                           -1
                           -2
           -1  0  1  2  3        
        */
<span class="nc" id="L504">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="nc" id="L505">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="nc" id="L506">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="nc" id="L507">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="nc" id="L510">        zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -2));</span>
<span class="nc" id="L511">        zeroes.add(new PairInt(0, -2));</span>
<span class="nc" id="L512">        zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, -2));</span>
        
<span class="nc" id="L514">        ones.add(new PairInt(0, -1)); </span>
<span class="nc" id="L515">        ones.add(new PairInt(1, -1));</span>
        
<span class="nc" id="L517">        changeToZeroes.add(new PairInt(0, -1));</span>
                    
<span class="nc" id="L519">        int nCorrections = 0;</span>
       
<span class="nc" id="L521">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="nc" id="L524">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="nc" id="L527">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="nc" id="L528">            Integer.toString(nCorrections));</span>
<span class="nc" id="L529">    }</span>
    
    private void correctForZigZag00_1(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                   0  0  #      2
                0  0  #         1
                0  #* #  0      0
                   #  0  0     -1
                #  0  0        -2
        
           -2  -1  0  1  2  3        
        */
        
<span class="fc" id="L544">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L545">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L546">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L547">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L550">        zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L551">        zeroes.add(new PairInt(0, 2)); zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L552">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -2));</span>
<span class="fc" id="L553">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L555">        ones.add(new PairInt(-1, 2));</span>
<span class="fc" id="L556">        ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L557">        ones.add(new PairInt(1, 0)); ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L558">        ones.add(new PairInt(2, -2));</span>
        
<span class="fc" id="L560">        changeToZeroes.add(new PairInt(1, 0));</span>
                    
<span class="fc" id="L562">        int nCorrections = 0;</span>
        
<span class="fc" id="L564">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L567">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L570">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L571">            Integer.toString(nCorrections));</span>
<span class="fc" id="L572">    }</span>
    
    private void correctForZigZag00_2(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                   0  0     #   2
                0  0  #  #      1
                0  #* #&lt; 0      0
                #     0  0     -1
             #                 -2
        
            -2 -1  0  1  2  3        
        */
        
<span class="fc" id="L587">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L588">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L589">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L590">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L593">        zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L594">        zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L595">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -2));</span>
<span class="fc" id="L596">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L598">        ones.add(new PairInt(-2, 2));</span>
<span class="fc" id="L599">        ones.add(new PairInt(-1, 1));</span>
<span class="fc" id="L600">        ones.add(new PairInt(1, 0)); ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L601">        ones.add(new PairInt(2, -1));</span>
<span class="fc" id="L602">        ones.add(new PairInt(3, -2));</span>
        
<span class="fc" id="L604">        changeToZeroes.add(new PairInt(1, 0));</span>
                    
<span class="fc" id="L606">        int nCorrections = 0;</span>
        
<span class="fc" id="L608">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L611">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L614">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L615">            Integer.toString(nCorrections));</span>
<span class="fc" id="L616">    }</span>
    
    private void correctForZigZag00_3(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
             0  0  0  0         2
             #  #  #&lt; 0         1
             0  0  #* #         0
                0  0  0  #     -1
        
            -2 -1  0  1  2     
        */
        
<span class="fc" id="L630">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L631">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L632">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L633">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L636">        zeroes.add(new PairInt(-2, 0)); zeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L637">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L638">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L639">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1)); zeroes.add(new PairInt(1, -2));</span>
        
<span class="fc" id="L641">        ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L642">        ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L643">        ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L644">        ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L645">        ones.add(new PairInt(2, 1));</span>
        
<span class="fc" id="L647">        changeToZeroes.add(new PairInt(0, -1));</span>
                    
<span class="fc" id="L649">        int nCorrections = 0;</span>
        
<span class="fc" id="L651">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L654">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L657">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L658">            Integer.toString(nCorrections));</span>
<span class="fc" id="L659">    }</span>
    
    private void correctForZigZag00_11(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                0  0  0         1
                0  #* #  #      0
                0  0  #  0     -1
            -2 -1  0  1  2  3  
        */
<span class="fc" id="L670">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L671">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L672">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L673">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L676">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L677">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L678">        zeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L679">        zeroes.add(new PairInt(2, 1));</span>
        
<span class="fc" id="L681">        ones.add(new PairInt(1, 1)); ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L682">        ones.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L684">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L686">        int nCorrections = 0;</span>
        
<span class="fc" id="L688">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L691">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L694">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L695">            Integer.toString(nCorrections));</span>
<span class="fc" id="L696">    }</span>
    
    private void correctForZigZag00_12(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
    
        /*       
                0  #  0         1
                0  #* #  #      0
                #  #  0        -1
                0  0  0        -2
            -2 -1  0  1  2  3  
        */
<span class="fc" id="L708">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L709">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L710">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L711">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L714">        zeroes.add(new PairInt(-1, 2)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L715">        zeroes.add(new PairInt(0, 2));</span>
<span class="fc" id="L716">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L718">        ones.add(new PairInt(-1, 1));</span>
<span class="fc" id="L719">        ones.add(new PairInt(0, 1)); ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L720">        ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L721">        ones.add(new PairInt(2, 0));</span>
 
<span class="fc" id="L723">        changeToZeroes.add(new PairInt(0, 1));</span>
                    
<span class="fc" id="L725">        int nCorrections = 0;</span>
        
<span class="fc" id="L727">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L730">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L733">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L734">            Integer.toString(nCorrections));</span>
<span class="fc" id="L735">    }</span>
    
    private void correctForZigZag00_13(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
    
        /*      0  0  0         3
                0  #  0         2
                0  #  #  #      1
             #  #  #* 0         0
             0  #  0  0        -1
             0  0  0           -2
            -2 -1  0  1  2  3  
        */
<span class="fc" id="L748">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L749">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L750">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L751">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L754">        zeroes.add(new PairInt(-2, 2)); zeroes.add(new PairInt(-2, 1));</span>
<span class="fc" id="L755">        zeroes.add(new PairInt(-1, 2)); zeroes.add(new PairInt(-1, -1)); </span>
<span class="fc" id="L756">        zeroes.add(new PairInt(-1, -2)); zeroes.add(new PairInt(-1, -3));</span>
<span class="fc" id="L757">        zeroes.add(new PairInt(0, 2)); zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L758">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, 0)); </span>
<span class="fc" id="L759">        zeroes.add(new PairInt(1, -2)); zeroes.add(new PairInt(1, -3));</span>
        
<span class="fc" id="L761">        ones.add(new PairInt(-2, 0));</span>
<span class="fc" id="L762">        ones.add(new PairInt(-1, 1)); ones.add(new PairInt(-1, 0));</span>
<span class="fc" id="L763">        ones.add(new PairInt(0, -1)); ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L764">        ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L765">        ones.add(new PairInt(2, -1));</span>
 
<span class="fc" id="L767">        changeToZeroes.add(new PairInt(-1, 1));</span>
<span class="fc" id="L768">        changeToZeroes.add(new PairInt(0, -2));</span>
                    
<span class="fc" id="L770">        int nCorrections = 0;</span>
        
<span class="fc" id="L772">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L775">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L778">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L779">            Integer.toString(nCorrections));</span>
<span class="fc" id="L780">    }</span>
    
    private void correctForZigZag00_5(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
          #  0  0  0  0         2
             #  #  #&lt; 0         1
             0  0  #* #         0
                0  0  0  #     -1
        
         -3 -2 -1  0  1  2     
        */
        
<span class="fc" id="L794">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L795">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L796">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L797">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L800">        ones.add(new PairInt(-3, -2));</span>
<span class="fc" id="L801">        ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L802">        ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L803">        ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L804">        ones.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L806">        zeroes.add(new PairInt(-2, 0)); zeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L807">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L808">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L809">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1)); zeroes.add(new PairInt(1, -2));</span>
        
<span class="fc" id="L811">        changeToZeroes.add(new PairInt(0, -1));</span>
                    
<span class="fc" id="L813">        int nCorrections = 0;</span>
        
<span class="fc" id="L815">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L818">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L821">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L822">            Integer.toString(nCorrections));</span>
<span class="fc" id="L823">    }</span>
    
    private void correctForZigZag00_6(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
             #  0  0  0         2
             0  #  #  0         1
             0  0  #*&lt;#  #      0
                0  0  0  #     -1
        
         -3 -2 -1  0  1  2     
        */
        
<span class="fc" id="L837">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L838">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L839">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L840">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L843">        ones.add(new PairInt(-2, -2));</span>
<span class="fc" id="L844">        ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L845">        ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L846">        ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L847">        ones.add(new PairInt(2, 1)); ones.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L849">        zeroes.add(new PairInt(-2, 0)); zeroes.add(new PairInt(-2, -1));</span>
<span class="fc" id="L850">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L851">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L852">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1)); zeroes.add(new PairInt(1, -2));</span>
        
<span class="fc" id="L854">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L856">        int nCorrections = 0;</span>
        
<span class="fc" id="L858">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L861">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L864">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L865">            Integer.toString(nCorrections));</span>
<span class="fc" id="L866">    }</span>
    
    private void correctForZigZag00_7(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
             #  0  0  0         2
             0  #  #  0         1
             0  0  #*&lt;#  0      0
                0  0  0  #     -1
        
         -3 -2 -1  0  1  2     
        */
        
<span class="fc" id="L880">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L881">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L882">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L883">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L886">        ones.add(new PairInt(-2, -2));</span>
<span class="fc" id="L887">        ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L888">        ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L889">        ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L890">        ones.add(new PairInt(2, 1));</span>
        
<span class="fc" id="L892">        zeroes.add(new PairInt(-2, 0)); zeroes.add(new PairInt(-2, -1));</span>
<span class="fc" id="L893">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L894">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L895">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1)); zeroes.add(new PairInt(1, -2));</span>
<span class="fc" id="L896">        zeroes.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L898">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L900">        int nCorrections = 0;</span>
        
<span class="fc" id="L902">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L905">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L908">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L909">            Integer.toString(nCorrections));</span>
<span class="fc" id="L910">    }</span>
    
    private void correctForZigZag00_8(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
          #  0  0  0  0         2
             #  #  #&lt; 0  0      1
             0  0  #* #  0      0
                0  0  #  #     -1
        
         -3 -2 -1  0  1  2     
        */
        
<span class="fc" id="L924">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L925">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L926">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L927">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L930">        ones.add(new PairInt(-3, -2));</span>
<span class="fc" id="L931">        ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L932">        ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L933">        ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L934">        ones.add(new PairInt(1, 1)); ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L935">        ones.add(new PairInt(2, 1));</span>
        
<span class="fc" id="L937">        zeroes.add(new PairInt(-2, 0)); zeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L938">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L939">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L940">        zeroes.add(new PairInt(1, -1)); zeroes.add(new PairInt(1, -2));</span>
<span class="fc" id="L941">        zeroes.add(new PairInt(2, 0)); zeroes.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L943">        changeToZeroes.add(new PairInt(0, -1));</span>
                    
<span class="fc" id="L945">        int nCorrections = 0;</span>
        
<span class="fc" id="L947">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L950">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L953">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L954">            Integer.toString(nCorrections));</span>
<span class="fc" id="L955">    }</span>
    
    private void correctForZigZag00_9(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
             #  0  0  0         2
             0  #  #  0  0      1
             0  0  #*&lt;#  #      0
                0  0  0  0     -1
        
         -3 -2 -1  0  1  2     
        */
        
<span class="fc" id="L969">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L970">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L971">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L972">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L975">        ones.add(new PairInt(-2, -2));</span>
<span class="fc" id="L976">        ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L977">        ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L978">        ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L979">        ones.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L981">        zeroes.add(new PairInt(-2, 0)); zeroes.add(new PairInt(-2, -1));</span>
<span class="fc" id="L982">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L983">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L984">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1)); zeroes.add(new PairInt(1, -2));</span>
<span class="fc" id="L985">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L987">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L989">        int nCorrections = 0;</span>
        
<span class="fc" id="L991">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L994">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L997">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L998">            Integer.toString(nCorrections));</span>
<span class="fc" id="L999">    }</span>
    
    private void correctForZigZag00_10(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                0  0            2
             0  0  #  #         1
             0  #&lt; #* 0         0
             #  #  0  0        -1
        
         -3 -2 -1  0  1  2     
        */
        
<span class="fc" id="L1013">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1014">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1015">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1016">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1019">        ones.add(new PairInt(-2, 1));</span>
<span class="fc" id="L1020">        ones.add(new PairInt(-1, 1)); ones.add(new PairInt(-1, 0));</span>
<span class="fc" id="L1021">        ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L1022">        ones.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L1024">        zeroes.add(new PairInt(-2, 0)); zeroes.add(new PairInt(-2, -1));</span>
<span class="fc" id="L1025">        zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L1026">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L1027">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L1029">        changeToZeroes.add(new PairInt(-1, 0));</span>
                    
<span class="fc" id="L1031">        int nCorrections = 0;</span>
        
<span class="fc" id="L1033">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1036">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1039">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1040">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1041">    }</span>
    
    private void correctForZigZag000_07(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                0  0  0         2
                #  #&lt; 0         1
                0  #  #*        0
                0  0  0        -1
            -3 -2 -1  0  1  2     
        */
        
<span class="fc" id="L1054">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1055">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1056">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1057">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1060">        ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L1061">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -1));</span>
        
<span class="fc" id="L1063">        zeroes.add(new PairInt(-2, 1)); zeroes.add(new PairInt(-2, 0)); zeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L1064">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L1065">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
        
<span class="fc" id="L1067">        changeToZeroes.add(new PairInt(-1, -1));</span>
                    
<span class="fc" id="L1069">        int nCorrections = 0;</span>
        
<span class="fc" id="L1071">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1074">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1077">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1078">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1079">    }</span>
    
    private void correctForZigZag000_06(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
           0  0  0        2
           #  #  0  0     1
           0  #&lt; #* 0     0
           0  0  #  0    -1
                         -2
       -3 -2 -1  0  1  2     
        */ 
<span class="fc" id="L1092">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1093">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1094">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1095">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1098">        ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L1099">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1100">        ones.add(new PairInt(0, 1));</span>
        
<span class="fc" id="L1102">        zeroes.add(new PairInt(-2, 1)); zeroes.add(new PairInt(-2, 0)); zeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L1103">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L1104">        zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L1105">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L1107">        changeToZeroes.add(new PairInt(-1, 0));</span>
                    
<span class="fc" id="L1109">        int nCorrections = 0;</span>
        
<span class="fc" id="L1111">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1114">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1117">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1118">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1119">    }</span>
    
    private void correctForZigZag000_08(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                #  0  0         1
                #  #*&lt;0         0
                0  #  0        -1
        
         -3 -2 -1  0  1  2     
        */
        
<span class="fc" id="L1132">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1133">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1134">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1135">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1138">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1139">        ones.add(new PairInt(0, 1));</span>
        
<span class="fc" id="L1141">        zeroes.add(new PairInt(-1, 1));</span>
<span class="fc" id="L1142">        zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L1143">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L1145">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L1147">        int nCorrections = 0;</span>
        
<span class="fc" id="L1149">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1152">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1155">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1156">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1157">    }</span>
    
    private void correctForZigZag00_14(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                0  #  0         1
                0  #*&lt;#  0      0
                0  #  #&lt; 0     -1
                #  0  0        -2
         -3 -2 -1  0  1  2     
        */
        
<span class="fc" id="L1170">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1171">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1172">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1173">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1176">        ones.add(new PairInt(-1, 2));</span>
<span class="fc" id="L1177">        ones.add(new PairInt(0, 1)); ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L1178">        ones.add(new PairInt(1, 1)); ones.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L1180">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1181">        zeroes.add(new PairInt(0, 2));</span>
<span class="fc" id="L1182">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L1183">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L1185">        changeToZeroes.add(new PairInt(0, 0));</span>
<span class="fc" id="L1186">        changeToZeroes.add(new PairInt(1, 1));</span>
                    
<span class="fc" id="L1188">        int nCorrections = 0;</span>
        
<span class="fc" id="L1190">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1193">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1196">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1197">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1198">    }</span>
    
    private void correctForZigZag00_15(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                #  0            2
                0  #  0         1
                0  #*&lt;#  0      0
                0  #&lt; #  0     -1
                   0  0  #     -2
         -3 -2 -1  0  1  2     
        */
        
<span class="fc" id="L1212">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1213">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1214">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1215">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1218">        ones.add(new PairInt(-1, -2));</span>
<span class="fc" id="L1219">        ones.add(new PairInt(0, 1)); ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L1220">        ones.add(new PairInt(1, 1)); ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L1221">        ones.add(new PairInt(2, 2));</span>
        
<span class="fc" id="L1223">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1224">        zeroes.add(new PairInt(0, 2)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L1225">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L1226">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L1228">        changeToZeroes.add(new PairInt(0, 1));</span>
<span class="fc" id="L1229">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L1231">        int nCorrections = 0;</span>
        
<span class="fc" id="L1233">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1236">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1239">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1240">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1241">    }</span>
    
    private void correctForZigZag00_16(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                                2
                0  0  0  #      1
                0  #* #  0      0
             0  #  #&lt; #&lt; 0     -1
             #  0  0  0  0     -2
         -3 -2 -1  0  1  2     
        */
        
<span class="fc" id="L1255">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1256">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1257">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1258">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1261">        ones.add(new PairInt(-2, 2));</span>
<span class="fc" id="L1262">        ones.add(new PairInt(-1, 1));</span>
<span class="fc" id="L1263">        ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L1264">        ones.add(new PairInt(1, 1)); ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L1265">        ones.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L1267">        zeroes.add(new PairInt(-2, 1));</span>
<span class="fc" id="L1268">        zeroes.add(new PairInt(-1, 2)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1269">        zeroes.add(new PairInt(0, 2)); zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L1270">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L1271">        zeroes.add(new PairInt(2, 2)); zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L1273">        changeToZeroes.add(new PairInt(0, 1));</span>
<span class="fc" id="L1274">        changeToZeroes.add(new PairInt(1, 1));</span>
                    
<span class="fc" id="L1276">        int nCorrections = 0;</span>
        
<span class="fc" id="L1278">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1281">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1284">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1285">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1286">    }</span>
    
    private void correctForZigZag00_17(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
             0  0  0            2
             0  #  0            1
             #  #  #* #         0
             0  0  #  0        -1
                0  0  0        -2
        
         -3 -2 -1  0  1  2     
        */
        
<span class="fc" id="L1301">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1302">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1303">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1304">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1307">        ones.add(new PairInt(-2, 0));</span>
<span class="fc" id="L1308">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1309">        ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L1310">        ones.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L1312">        zeroes.add(new PairInt(-2, 1)); zeroes.add(new PairInt(-2, -1)); zeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L1313">        zeroes.add(new PairInt(-1, 2)); zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L1314">        zeroes.add(new PairInt(0, 2)); zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L1315">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, 1));</span>
        
<span class="fc" id="L1317">        changeToZeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1318">        changeToZeroes.add(new PairInt(0, 1));</span>
                    
<span class="fc" id="L1320">        int nCorrections = 0;</span>
        
<span class="fc" id="L1322">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1325">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1328">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1329">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1330">    }</span>
    
    private void correctForTs(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
          0  0  0  0            2
          #  #  #  0  0  0      1
          0  #&lt; 0  #* #  #      0
          0  0  0  0  #&lt; 0     -1
                   0  0  0     -2
         -3 -2 -1  0  1  2     
        */
        
<span class="fc" id="L1344">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1345">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1346">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1347">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1350">        ones.add(new PairInt(-3, -1));</span>
<span class="fc" id="L1351">        ones.add(new PairInt(-2, 0));ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L1352">        ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1353">        ones.add(new PairInt(1, 1)); ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L1354">        ones.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L1356">        zeroes.add(new PairInt(-3, 1)); zeroes.add(new PairInt(-3, 0)); zeroes.add(new PairInt(-3, -2));</span>
<span class="fc" id="L1357">        zeroes.add(new PairInt(-2, 1)); zeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L1358">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L1359">        zeroes.add(new PairInt(0, 2)); zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L1360">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L1361">        zeroes.add(new PairInt(2, 2)); zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L1363">        changeToZeroes.add(new PairInt(-2, 0));</span>
<span class="fc" id="L1364">        changeToZeroes.add(new PairInt(1, 1));</span>
                    
<span class="fc" id="L1366">        int nCorrections = 0;</span>
        
<span class="fc" id="L1368">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1371">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1374">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1375">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1376">    }</span>
    
    private void correctForTs_0(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
             #  0  0  0         1
             0  #  #* #         0
                0  #  0        -1
                0  0  0        -2
            -2 -1  0  1  2     
        */
        
<span class="fc" id="L1389">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1390">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1391">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1392">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1395">        ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L1396">        ones.add(new PairInt(-1, 0));</span>
<span class="fc" id="L1397">        ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L1398">        ones.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L1400">        zeroes.add(new PairInt(-2, 0));</span>
<span class="fc" id="L1401">        zeroes.add(new PairInt(-1, 2)); zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1402">        zeroes.add(new PairInt(0, 2)); zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L1403">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L1405">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L1407">        int nCorrections = 0;</span>
        
<span class="fc" id="L1409">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1412">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1415">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1416">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1417">    }</span>
    
    private void correctForTs_0_1(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                0  0  0  0      1
             #  #  #* #  #      0
                0  #  0        -1
                0  0  0        -2
            -2 -1  0  1  2     
        */
        
<span class="fc" id="L1430">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1431">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1432">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1433">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1436">        ones.add(new PairInt(-2, 0));</span>
<span class="fc" id="L1437">        ones.add(new PairInt(-1, 0));</span>
<span class="fc" id="L1438">        ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L1439">        ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L1440">        ones.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L1442">        zeroes.add(new PairInt(-1, 2)); zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1443">        zeroes.add(new PairInt(0, 2)); zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L1444">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L1445">        zeroes.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L1447">        changeToZeroes.add(new PairInt(0, 1));</span>
                    
<span class="fc" id="L1449">        int nCorrections = 0;</span>
        
<span class="fc" id="L1451">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1454">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1457">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1458">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1459">    }</span>
    
    private void correctForTs_0_2(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                0  0  0         1
             0  #  #* #         0
             #  0  #  0        -1
                0  0  0        -2
            -2 -1  0  1  2     
        */
        
<span class="fc" id="L1472">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1473">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1474">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1475">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1478">        ones.add(new PairInt(-2, 1));</span>
<span class="fc" id="L1479">        ones.add(new PairInt(-1, 0));</span>
<span class="fc" id="L1480">        ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L1481">        ones.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L1483">        zeroes.add(new PairInt(-2, 0));</span>
<span class="fc" id="L1484">        zeroes.add(new PairInt(-1, 2)); zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1485">        zeroes.add(new PairInt(0, 2)); zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L1486">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L1488">        changeToZeroes.add(new PairInt(0, 1));</span>
                    
<span class="fc" id="L1490">        int nCorrections = 0;</span>
        
<span class="fc" id="L1492">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1495">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1498">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1499">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1500">    }</span>
    
    private void correctForTs_0_3(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
             #  0  0  0         1
             0  #  #* #         0
                0  #  0        -1
                0  #  0        -2
            -2 -1  0  1  2     
        */
        
<span class="fc" id="L1513">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1514">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1515">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1516">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1519">        ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L1520">        ones.add(new PairInt(-1, 0));</span>
<span class="fc" id="L1521">        ones.add(new PairInt(0, 2)); ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L1522">        ones.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L1524">        zeroes.add(new PairInt(-2, 0));</span>
<span class="fc" id="L1525">        zeroes.add(new PairInt(-1, 2)); zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1526">        zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L1527">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L1529">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L1531">        int nCorrections = 0;</span>
        
<span class="fc" id="L1533">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1536">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1539">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1540">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1541">    }</span>
    
    private void correctForTs_1(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                                2
                0  #  0  0      1
                0  #* #  0      0
                0  #  0  0     -1
                #  0           -2
            -2 -1  0  1  2     
        */
        
<span class="fc" id="L1555">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1556">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1557">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1558">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1561">        ones.add(new PairInt(-1, 2));</span>
<span class="fc" id="L1562">        ones.add(new PairInt(0, 1)); ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L1563">        ones.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L1565">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1566">        zeroes.add(new PairInt(0, 2));</span>
<span class="fc" id="L1567">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L1568">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0)); zeroes.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L1570">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L1572">        int nCorrections = 0;</span>
        
<span class="fc" id="L1574">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1577">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1580">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1581">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1582">    }</span>
    
    private void correctForTs_1_1(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                0  #            2
                0  #  0  0      1
                0  #* #  0      0
                0  #  0  0     -1
                0  #           -2
            -2 -1  0  1  2     
        */
        
<span class="fc" id="L1596">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1597">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1598">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1599">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1602">        ones.add(new PairInt(0, 2)); ones.add(new PairInt(0, 1)); </span>
<span class="fc" id="L1603">        ones.add(new PairInt(0, -1)); ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L1604">        ones.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L1606">        zeroes.add(new PairInt(-1, 2)); zeroes.add(new PairInt(-1, 1)); </span>
<span class="fc" id="L1607">        zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L1608">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L1609">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0)); zeroes.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L1611">        changeToZeroes.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L1613">        int nCorrections = 0;</span>
        
<span class="fc" id="L1615">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
        // ----- change the sign of x to handle other direction -----
<span class="fc" id="L1619">        reverseXs(zeroes, ones, changeToZeroes, changeToOnes);</span>
        
<span class="fc" id="L1621">        nCorrections += replacePattern(</span>
            points, imageWidth, imageHeight,
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1625">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1626">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1627">    }</span>
    
    private void correctForZigZag00_4(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*       
                0  0  0  #      1
                0  #* #  0      0
                0  #  0  0     -1
                #  0  0        -2
        
           -2  -1  0  1  2  3        
        */
        
<span class="fc" id="L1641">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1642">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1643">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1644">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1647">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1648">        zeroes.add(new PairInt(0, 2)); zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L1649">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L1650">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L1652">        ones.add(new PairInt(-1, 2));</span>
<span class="fc" id="L1653">        ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L1654">        ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L1655">        ones.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L1657">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L1659">        int nCorrections = 0;</span>
        
<span class="fc" id="L1661">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1664">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1667">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1668">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1669">    }</span>
    
    /**
     * using this one unfortunately reduces the sharpness of real corners,
     * but it allows clear point ordering when extracting edges from the
     * line thinned image.
     */
    protected void correctForLs_0(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*          
        0  #  0         1
        0  #* 0         0
        0  #&lt; #        -1
        0  0  0  #     -2
        
       -1  0  1  2 
        */
        
<span class="fc" id="L1688">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1689">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1690">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1691">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
    
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1694">        zeroes.add(new PairInt(-1, 2)); zeroes.add(new PairInt(-1, 1)); </span>
<span class="fc" id="L1695">        zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1)); </span>
<span class="fc" id="L1696">        zeroes.add(new PairInt(0, 2));</span>
<span class="fc" id="L1697">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L1699">        ones.add(new PairInt(0, 1)); ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L1700">        ones.add(new PairInt(1, 1));</span>
<span class="fc" id="L1701">        ones.add(new PairInt(2, 2));</span>
        
<span class="fc" id="L1703">        changeToZeroes.add(new PairInt(0, 1));</span>
                    
<span class="fc" id="L1705">        int nCorrections = 0;</span>
        
<span class="fc" id="L1707">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1710">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1713">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1714">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1715">    }</span>
    
    /**
     * using this one unfortunately reduces the sharpness of real corners,
     * but it allows clear point ordering when extracting edges from the
     * line thinned image.
     */
    protected void correctForLs_1(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*          
        0  #  0         1
        0  #* 0         0
        0  #&lt; #        -1
        0  0  #        -2
        
       -1  0  1  2 
        */
        
<span class="fc" id="L1734">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1735">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1736">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1737">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
    
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1740">        zeroes.add(new PairInt(-1, 2)); zeroes.add(new PairInt(-1, 1)); </span>
<span class="fc" id="L1741">        zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1)); </span>
<span class="fc" id="L1742">        zeroes.add(new PairInt(0, 2));</span>
<span class="fc" id="L1743">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L1745">        ones.add(new PairInt(0, 1)); ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L1746">        ones.add(new PairInt(1, 1));</span>
<span class="fc" id="L1747">        ones.add(new PairInt(1, 2));</span>
        
<span class="fc" id="L1749">        changeToZeroes.add(new PairInt(0, 1));</span>
                    
<span class="fc" id="L1751">        int nCorrections = 0;</span>
        
<span class="fc" id="L1753">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1756">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1759">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1760">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1761">    }</span>
    
    protected void correctForLs_2(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*          
             0  #  0         1
             0  #* 0  0      0
             0  #  #&lt; 0     -1
             #  0  0  0     -2
          #                 -3
         -2 -1  0  1  2 
        */
        
<span class="fc" id="L1775">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1776">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1777">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1778">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
    
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1781">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1)); </span>
<span class="fc" id="L1782">        zeroes.add(new PairInt(0, 2));</span>
<span class="fc" id="L1783">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L1784">        zeroes.add(new PairInt(2, 2)); zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0)); </span>
        
<span class="fc" id="L1786">        ones.add(new PairInt(-2, 3));</span>
<span class="fc" id="L1787">        ones.add(new PairInt(-1, 2));</span>
<span class="fc" id="L1788">        ones.add(new PairInt(0, 1)); ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L1789">        ones.add(new PairInt(1, 1));</span>
        
<span class="fc" id="L1791">        changeToZeroes.add(new PairInt(1, 1));</span>
                    
<span class="fc" id="L1793">        int nCorrections = 0;</span>
        
<span class="fc" id="L1795">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1798">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1801">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1802">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1803">    }</span>
    
    protected void correctForLs_3(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*          
            0  0  0         1
            0  #* 0         0
            0  #&lt; #  #     -1
            #  0  0  0     -2
         #                 -3       
        -2 -1  0  1  2 
        */
        
<span class="fc" id="L1817">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1818">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1819">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1820">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
    
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1823">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, -1)); </span>
<span class="fc" id="L1824">        zeroes.add(new PairInt(0, 2)); zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L1825">        zeroes.add(new PairInt(1, 2)); zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L1826">        zeroes.add(new PairInt(2, 2));</span>
        
<span class="fc" id="L1828">        ones.add(new PairInt(-2, 3));</span>
<span class="fc" id="L1829">        ones.add(new PairInt(-1, 2));</span>
<span class="fc" id="L1830">        ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L1831">        ones.add(new PairInt(1, 1));</span>
<span class="fc" id="L1832">        ones.add(new PairInt(2, 1));</span>
        
<span class="fc" id="L1834">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L1836">        int nCorrections = 0;</span>
        
<span class="fc" id="L1838">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1841">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1844">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1845">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1846">    }</span>
    
    protected void correctForLs2_0(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*        
        #               2
        0  #  0  0      1
        0  #*&lt;#  #      0
        0  0  0  0     -1
        
       -1  0  1  2  3
        */
        
<span class="fc" id="L1860">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1861">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1862">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1863">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
   
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1866">        zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, 1));</span>
<span class="fc" id="L1867">        zeroes.add(new PairInt(0, 1));</span>
<span class="fc" id="L1868">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L1869">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L1871">        ones.add(new PairInt(-1, -2));</span>
<span class="fc" id="L1872">        ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L1873">        ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L1874">        ones.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L1876">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L1878">        int nCorrections = 0;</span>
        
<span class="fc" id="L1880">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1883">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1886">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1887">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1888">    }</span>
    
    protected void correctForLs2_1(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*        
           #            2
        0  #  0  0      1
        0  #*&lt;#  #      0
        0  0  0  0     -1
        
       -1  0  1  2  3
        */
        
<span class="fc" id="L1902">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1903">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1904">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1905">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
   
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1908">        zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, 1));</span>
<span class="fc" id="L1909">        zeroes.add(new PairInt(0, 1));</span>
<span class="fc" id="L1910">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L1911">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L1913">        ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L1914">        ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L1915">        ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L1916">        ones.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L1918">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L1920">        int nCorrections = 0;</span>
        
<span class="fc" id="L1922">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1925">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1928">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1929">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1930">    }</span>
    
    protected void correctForExtCorner(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*        
           0  0  #      2
        0  0  #  0      1
        0  #*&lt;#  0      0
        0  0  0  0     -1
        
       -1  0  1  2  3
        */
        
<span class="fc" id="L1944">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1945">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1946">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1947">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
   
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1950">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, 0)); zeroes.add(new PairInt(-1, 1));</span>
<span class="fc" id="L1951">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L1952">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -2));</span>
<span class="fc" id="L1953">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0)); zeroes.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L1955">        ones.add(new PairInt(1, 0)); ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L1956">        ones.add(new PairInt(2, -2));</span>
        
<span class="fc" id="L1958">        changeToZeroes.add(new PairInt(1, 0));</span>
                    
<span class="fc" id="L1960">        int nCorrections = 0;</span>
        
<span class="fc" id="L1962">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1965">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L1968">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L1969">            Integer.toString(nCorrections));</span>
<span class="fc" id="L1970">    }</span>
    
    private void correctForZigZag000_09(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
       
        /*        
            #  0  0         1
            #  #*&lt;0         0
            0  #  #        -1
           -1  0  1  2 
        */
        
<span class="fc" id="L1982">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1983">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1984">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L1985">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
    
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L1988">        zeroes.add(new PairInt(-1, 1));</span>
<span class="fc" id="L1989">        zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L1990">        zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L1992">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L1993">        ones.add(new PairInt(0, 1));</span>
<span class="fc" id="L1994">        ones.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L1996">        changeToZeroes.add(new PairInt(0, 0));</span>
                    
<span class="fc" id="L1998">        int nCorrections = 0;</span>
        
<span class="fc" id="L2000">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L2003">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L2006">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L2007">            Integer.toString(nCorrections));</span>
<span class="fc" id="L2008">    }</span>
    
    protected void reverseXs(
        final Set&lt;PairInt&gt; zeroes, final Set&lt;PairInt&gt; ones, 
        Set&lt;PairInt&gt; changeToZeroes, final Set&lt;PairInt&gt; changeToOnes) {
        
        // ----- change the sign of x to handle other direction -----
<span class="fc bfc" id="L2015" title="All 2 branches covered.">        for (PairInt p : zeroes) {</span>
<span class="fc" id="L2016">            p.setX(-1 * p.getX());</span>
<span class="fc" id="L2017">        }</span>
        
<span class="fc bfc" id="L2019" title="All 2 branches covered.">        for (PairInt p : ones) {</span>
<span class="fc" id="L2020">            p.setX(-1 * p.getX());</span>
<span class="fc" id="L2021">        }</span>
          
<span class="fc bfc" id="L2023" title="All 2 branches covered.">        for (PairInt p : changeToZeroes) {</span>
<span class="fc" id="L2024">            p.setX(-1 * p.getX());</span>
<span class="fc" id="L2025">        }</span>
        
<span class="fc bfc" id="L2027" title="All 2 branches covered.">        for (PairInt p : changeToOnes) {</span>
<span class="fc" id="L2028">            p.setX(-1 * p.getX());</span>
<span class="fc" id="L2029">        }</span>
<span class="fc" id="L2030">    }</span>
    
    protected void reverseXs(final Set&lt;PairInt&gt; zeroes, final Set&lt;PairInt&gt; ones) {
        
        // ----- change the sign of x to handle other direction -----
<span class="fc bfc" id="L2035" title="All 2 branches covered.">        for (PairInt p : zeroes) {</span>
<span class="fc" id="L2036">            p.setX(-1 * p.getX());</span>
<span class="fc" id="L2037">        }</span>
        
<span class="fc bfc" id="L2039" title="All 2 branches covered.">        for (PairInt p : ones) {</span>
<span class="fc" id="L2040">            p.setX(-1 * p.getX());</span>
<span class="fc" id="L2041">        }</span>
        
<span class="fc" id="L2043">    }</span>
    
    protected void reverseYs(final Set&lt;PairInt&gt; zeroes, final Set&lt;PairInt&gt; ones, 
        Set&lt;PairInt&gt; changeToZeroes, final Set&lt;PairInt&gt; changeToOnes) {
        
        // ----- change the sign of y  -----
<span class="fc bfc" id="L2049" title="All 2 branches covered.">        for (PairInt p : zeroes) {</span>
<span class="fc" id="L2050">            p.setY(-1 * p.getY());</span>
<span class="fc" id="L2051">        }</span>
        
<span class="fc bfc" id="L2053" title="All 2 branches covered.">        for (PairInt p : ones) {</span>
<span class="fc" id="L2054">            p.setY(-1 * p.getY());</span>
<span class="fc" id="L2055">        }</span>
        
<span class="fc bfc" id="L2057" title="All 2 branches covered.">        for (PairInt p : changeToZeroes) {</span>
<span class="fc" id="L2058">            p.setY(-1 * p.getY());</span>
<span class="fc" id="L2059">        }</span>
        
<span class="fc bfc" id="L2061" title="All 2 branches covered.">        for (PairInt p : changeToOnes) {</span>
<span class="fc" id="L2062">            p.setY(-1 * p.getY());</span>
<span class="fc" id="L2063">        }</span>
        
<span class="fc" id="L2065">    }</span>
    
    protected void reverseYs(final Set&lt;PairInt&gt; zeroes, final Set&lt;PairInt&gt; ones) {
        
        // ----- change the sign of y  -----
<span class="fc bfc" id="L2070" title="All 2 branches covered.">        for (PairInt p : zeroes) {</span>
<span class="fc" id="L2071">            p.setY(-1 * p.getY());</span>
<span class="fc" id="L2072">        }</span>
        
<span class="fc bfc" id="L2074" title="All 2 branches covered.">        for (PairInt p : ones) {</span>
<span class="fc" id="L2075">            p.setY(-1 * p.getY());</span>
<span class="fc" id="L2076">        }</span>
        
<span class="fc" id="L2078">    }</span>
    
    private int rotate90ThreeTimes(
        Set&lt;PairInt&gt; points, int imageWidth, int imageHeight,
        final LinkedHashSet&lt;PairInt&gt; zeroes, final LinkedHashSet&lt;PairInt&gt; ones, 
        LinkedHashSet&lt;PairInt&gt; changeToZeroes, 
        final LinkedHashSet&lt;PairInt&gt; changeToOnes) {
        
        // ----- change the sign of x to handle other direction -----
<span class="fc" id="L2087">        reverseXs(zeroes, ones, changeToZeroes, changeToOnes);</span>
        
<span class="fc" id="L2089">        int nCorrections = 0;</span>
        
<span class="fc" id="L2091">        nCorrections += replacePattern(</span>
            points, imageWidth, imageHeight,
            zeroes, ones, changeToZeroes, changeToOnes);
             
        // ----- change the sign of y to handle other direction -----
<span class="fc" id="L2096">        reverseYs(zeroes, ones, changeToZeroes, changeToOnes);</span>
        
<span class="fc" id="L2098">        nCorrections += replacePattern(</span>
            points, imageWidth, imageHeight,
            zeroes, ones, changeToZeroes, changeToOnes);
        
        // ----- change the sign of x to handle another direction -----
<span class="fc" id="L2103">        reverseXs(zeroes, ones, changeToZeroes, changeToOnes);</span>
                    
<span class="fc" id="L2105">        nCorrections += replacePattern(</span>
            points, imageWidth, imageHeight,
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L2109">        return nCorrections;</span>
    }
    
    private int replacePattern(
        Set&lt;PairInt&gt; points, int imageWidth, int imageHeight,
        final LinkedHashSet&lt;PairInt&gt; zeroes, final LinkedHashSet&lt;PairInt&gt; ones, 
        final LinkedHashSet&lt;PairInt&gt; changeToZeroes, 
        final LinkedHashSet&lt;PairInt&gt; changeToOnes) {
        
<span class="fc" id="L2118">        int w = imageWidth;</span>
<span class="fc" id="L2119">        int h = imageHeight;</span>

<span class="fc" id="L2121">        Set&lt;PairInt&gt; tmpPointsRemoved = new HashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2122">        Set&lt;PairInt&gt; tmpPointsAdded = new HashSet&lt;PairInt&gt;();</span>

<span class="fc bfc" id="L2124" title="All 2 branches covered.">        for (PairInt p : points) {</span>
            
<span class="fc" id="L2126">            boolean isNotPresent = tmpPointsRemoved.contains(p);</span>
<span class="fc bfc" id="L2127" title="All 2 branches covered.">            if (isNotPresent) {</span>
<span class="fc" id="L2128">                continue;</span>
            }
            
<span class="fc" id="L2131">            int col = p.getX();</span>
<span class="fc" id="L2132">            int row = p.getY();           </span>
                
<span class="fc" id="L2134">            boolean foundPattern = true;</span>
           
<span class="fc bfc" id="L2136" title="All 2 branches covered.">            for (PairInt p2 : zeroes) {</span>
<span class="fc" id="L2137">                int x = col + p2.getX();</span>
<span class="fc" id="L2138">                int y = row + p2.getY();</span>
<span class="fc bfc" id="L2139" title="All 8 branches covered.">                if ((x &lt; 0) || (y &lt; 0) || (x &gt; (w - 1)) || (y &gt; (h - 1))) {</span>
                    //TODO: revisit this
<span class="fc" id="L2141">                    foundPattern = false;</span>
<span class="fc" id="L2142">                    break;</span>
                }
<span class="fc" id="L2144">                PairInt p3 = new PairInt(x, y);</span>
<span class="fc bfc" id="L2145" title="All 2 branches covered.">                if (!tmpPointsRemoved.contains(p3)</span>
<span class="fc bfc" id="L2146" title="All 4 branches covered.">                    &amp;&amp; (points.contains(p3) || tmpPointsAdded.contains(p3))) {</span>
<span class="fc" id="L2147">                    foundPattern = false;</span>
              
<span class="fc" id="L2149">                    break;</span>
                }
<span class="fc" id="L2151">            }</span>
               
<span class="fc bfc" id="L2153" title="All 2 branches covered.">            if (!foundPattern) {</span>
<span class="fc" id="L2154">                continue;</span>
            }

<span class="fc bfc" id="L2157" title="All 2 branches covered.">            for (PairInt p2 : ones) {</span>
<span class="fc" id="L2158">                int x = col + p2.getX();</span>
<span class="fc" id="L2159">                int y = row + p2.getY();</span>
<span class="fc bfc" id="L2160" title="All 8 branches covered.">                if ((x &lt; 0) || (y &lt; 0) || (x &gt; (w - 1)) || (y &gt; (h - 1))) {</span>
<span class="fc" id="L2161">                    foundPattern = false;</span>
<span class="fc" id="L2162">                    break;</span>
                }
<span class="fc" id="L2164">                PairInt p3 = new PairInt(x, y);</span>
<span class="fc bfc" id="L2165" title="All 2 branches covered.">                if (tmpPointsRemoved.contains(p3) ||</span>
<span class="fc bfc" id="L2166" title="All 4 branches covered.">                    (!points.contains(p3) &amp;&amp; !tmpPointsAdded.contains(p3))) {</span>
<span class="fc" id="L2167">                    foundPattern = false;</span>

<span class="fc" id="L2169">                    break;</span>
                }
<span class="fc" id="L2171">            }</span>
          
<span class="fc bfc" id="L2173" title="All 2 branches covered.">            if (!foundPattern) {</span>
<span class="fc" id="L2174">                continue;</span>
            }
            
<span class="fc bfc" id="L2177" title="All 2 branches covered.">            for (PairInt p2 : changeToZeroes) {</span>
<span class="fc" id="L2178">                int x = col + p2.getX();</span>
<span class="fc" id="L2179">                int y = row + p2.getY();</span>
<span class="pc bpc" id="L2180" title="4 of 8 branches missed.">                if ((x &lt; 0) || (y &lt; 0) || (x &gt; (w - 1)) || (y &gt; (h - 1))) {</span>
<span class="nc" id="L2181">                    continue;</span>
                }
<span class="fc" id="L2183">                PairInt p3 = new PairInt(x, y);</span>
<span class="fc" id="L2184">                tmpPointsAdded.remove(p3);                </span>
<span class="fc" id="L2185">                tmpPointsRemoved.add(p3);</span>
<span class="fc" id="L2186">            }</span>

<span class="fc bfc" id="L2188" title="All 2 branches covered.">            for (PairInt p2 : changeToOnes) {</span>
<span class="fc" id="L2189">                int x = col + p2.getX();</span>
<span class="fc" id="L2190">                int y = row + p2.getY();</span>
<span class="pc bpc" id="L2191" title="4 of 8 branches missed.">                if ((x &lt; 0) || (y &lt; 0) || (x &gt; (w - 1)) || (y &gt; (h - 1))) {</span>
<span class="nc" id="L2192">                    continue;</span>
                }
<span class="fc" id="L2194">                PairInt p3 = new PairInt(x, y);                </span>
<span class="fc" id="L2195">                tmpPointsRemoved.remove(p3);</span>
<span class="fc" id="L2196">                tmpPointsAdded.add(p3);</span>
<span class="fc" id="L2197">            }</span>
<span class="fc" id="L2198">        }</span>
        
<span class="fc" id="L2200">        int nCorrections = tmpPointsRemoved.size() + tmpPointsAdded.size();</span>
        
<span class="fc bfc" id="L2202" title="All 2 branches covered.">        for (PairInt p2 : tmpPointsRemoved) {</span>
<span class="fc" id="L2203">            points.remove(p2);</span>
<span class="fc" id="L2204">        }</span>
<span class="fc bfc" id="L2205" title="All 2 branches covered.">        for (PairInt p2 : tmpPointsAdded) {</span>
<span class="fc" id="L2206">            points.add(p2);</span>
<span class="fc" id="L2207">        }</span>
        
<span class="fc" id="L2209">        return nCorrections;</span>
    }
    
    /**
     * removes a hole artifact in inclined lines.  note that this should
     * probably be adjusted for gaussian convolution combined radius
     * if used outside of the gradientXY image produced by the
     * CannyEdgeFilter.
     * @param input 
     */
    private void correctForHoleArtifacts3(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*
        looking for pattern
        
            0    0    0    0    0    0           3 4
            0    0    0    0    1    1    1      2 3
            0    0    0    1    0    1    0      1 2
            0    0    1    0*   1    1    0      0 1
            0    1    0    1**  1    0    0     -1 0
            0    1    1    1    0    0    0     -2
            0    1    0    0    0    0    0     -3
        
           -3   -2   -1    0    1    2    3     
        
        and removing the topmost left #'s
        
        */
        
<span class="nc" id="L2239">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="nc" id="L2240">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="nc" id="L2241">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="nc" id="L2242">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
        
        // y's are inverted here because sketch above is top left is (0,0)
<span class="nc" id="L2245">        zeroes.add(new PairInt(-1, -1 - 1));</span>
<span class="nc" id="L2246">        zeroes.add(new PairInt(-1, 1 - 1));</span>
<span class="nc" id="L2247">        zeroes.add(new PairInt(1, -1 - 1));</span>
<span class="nc" id="L2248">        zeroes.add(new PairInt(0, -2 - 1));</span>
<span class="nc" id="L2249">        zeroes.add(new PairInt(1, 2 - 1));</span>
<span class="nc" id="L2250">        zeroes.add(new PairInt(2, 2 - 1)); </span>
<span class="nc" id="L2251">        zeroes.add(new PairInt(2, 1 - 1));</span>
<span class="nc" id="L2252">        zeroes.add(new PairInt(0, -3 - 1));</span>
<span class="nc" id="L2253">        zeroes.add(new PairInt(1, -3 - 1));</span>
<span class="nc" id="L2254">        zeroes.add(new PairInt(-1, -2 - 1));</span>
<span class="nc" id="L2255">        zeroes.add(new PairInt(-1, -3 - 1));</span>
<span class="nc" id="L2256">        zeroes.add(new PairInt(2, -3 - 1));</span>
<span class="nc" id="L2257">        zeroes.add(new PairInt(-2, -3 - 1));</span>
<span class="nc" id="L2258">        zeroes.add(new PairInt(-2, -2 - 1));</span>
<span class="nc" id="L2259">        zeroes.add(new PairInt(-2, -1 - 1));</span>
<span class="nc" id="L2260">        zeroes.add(new PairInt(-2, 0 - 1));</span>
<span class="nc" id="L2261">        zeroes.add(new PairInt(-1, 3 - 1));</span>
<span class="nc" id="L2262">        zeroes.add(new PairInt(0, 3 - 1));</span>
<span class="nc" id="L2263">        zeroes.add(new PairInt(1, 3 - 1));</span>
<span class="nc" id="L2264">        zeroes.add(new PairInt(2, 3 - 1));</span>
<span class="nc" id="L2265">        zeroes.add(new PairInt(3, 3 - 1));</span>
<span class="nc" id="L2266">        zeroes.add(new PairInt(3, 2 - 1));</span>
<span class="nc" id="L2267">        zeroes.add(new PairInt(3, 1 - 1));</span>
<span class="nc" id="L2268">        zeroes.add(new PairInt(3, 0 - 1));</span>
<span class="nc" id="L2269">        zeroes.add(new PairInt(3, -1 - 1));</span>
<span class="nc" id="L2270">        zeroes.add(new PairInt(-3, -3 - 1));</span>
<span class="nc" id="L2271">        zeroes.add(new PairInt(-3, 2 - 1));</span>
<span class="nc" id="L2272">        zeroes.add(new PairInt(-3, -1 - 1));</span>
<span class="nc" id="L2273">        zeroes.add(new PairInt(-3, 0 - 1));</span>
<span class="nc" id="L2274">        zeroes.add(new PairInt(-3, -1 - 1));</span>
<span class="nc" id="L2275">        zeroes.add(new PairInt(-3, -2 - 1));</span>
<span class="nc" id="L2276">        zeroes.add(new PairInt(-3, -3 - 1));</span>
        
<span class="nc" id="L2278">        ones.add(new PairInt(0, 1 - 1));</span>
<span class="nc" id="L2279">        ones.add(new PairInt(0, 2 - 1));</span>
<span class="nc" id="L2280">        ones.add(new PairInt(0, -1 - 1));</span>
<span class="nc" id="L2281">        ones.add(new PairInt(-1, 0 - 1));</span>
<span class="nc" id="L2282">        ones.add(new PairInt(-1, 2 - 1));</span>
<span class="nc" id="L2283">        ones.add(new PairInt(1, -2 - 1));</span>
<span class="nc" id="L2284">        ones.add(new PairInt(1, 0 - 1));</span>
<span class="nc" id="L2285">        ones.add(new PairInt(1, 1 - 1));</span>
<span class="nc" id="L2286">        ones.add(new PairInt(2, -2 - 1));</span>
<span class="nc" id="L2287">        ones.add(new PairInt(2, -1 - 1));</span>
<span class="nc" id="L2288">        ones.add(new PairInt(2, 0 - 1));</span>
<span class="nc" id="L2289">        ones.add(new PairInt(3, -2 - 1));</span>
<span class="nc" id="L2290">        ones.add(new PairInt(-2, 1 - 1));</span>
<span class="nc" id="L2291">        ones.add(new PairInt(-2, 2 - 1));</span>
<span class="nc" id="L2292">        ones.add(new PairInt(-2, 3 - 1));</span>
    
<span class="nc" id="L2294">        changeToZeroes.add(new PairInt(-2, 2 - 1));</span>
<span class="nc" id="L2295">        changeToZeroes.add(new PairInt(-2, 1 - 1));</span>
<span class="nc" id="L2296">        changeToZeroes.add(new PairInt(-1, 0 - 1));</span>
<span class="nc" id="L2297">        changeToZeroes.add(new PairInt(0, -1 - 1));</span>
<span class="nc" id="L2298">        changeToZeroes.add(new PairInt(1, -2 - 1));</span>
<span class="nc" id="L2299">        changeToZeroes.add(new PairInt(2, -2 - 1));</span>
<span class="nc" id="L2300">        changeToZeroes.add(new PairInt(2, 0 - 1));</span>
<span class="nc" id="L2301">        changeToZeroes.add(new PairInt(1, 1 - 1));</span>
<span class="nc" id="L2302">        changeToZeroes.add(new PairInt(0, 2 - 1));</span>
                      
<span class="nc" id="L2304">        int nCorrections = 0;</span>
        
<span class="nc" id="L2306">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="nc" id="L2309">        nCorrections += rotate90ThreeTimes(</span>
            points, imageWidth, imageHeight,
            zeroes, ones, changeToZeroes, changeToOnes);
       
<span class="nc" id="L2313">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="nc" id="L2314">            Integer.toString(nCorrections));</span>
<span class="nc" id="L2315">    }</span>
    
    private void correctForLine0(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*
        looking for pattern
       
        0  #  0         2
        0  #  0  0      1
        0  0  #  0      0
        0  #* 0  0     -1
        0  #  0
        
       -1  0  1  2
        
        */
        
<span class="fc" id="L2333">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2334">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2335">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2336">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L2339">        zeroes.add(new PairInt(-1, 2 - 1));</span>
<span class="fc" id="L2340">        zeroes.add(new PairInt(-1, 1 - 1));</span>
<span class="fc" id="L2341">        zeroes.add(new PairInt(-1, 0 - 1));</span>
<span class="fc" id="L2342">        zeroes.add(new PairInt(-1, -1 - 1));</span>
<span class="fc" id="L2343">        zeroes.add(new PairInt(-1, -2 - 1));</span>
<span class="fc" id="L2344">        zeroes.add(new PairInt(1, 2 - 1));</span>
<span class="fc" id="L2345">        zeroes.add(new PairInt(1, 1 - 1));</span>
<span class="fc" id="L2346">        zeroes.add(new PairInt(1, -1 - 1));</span>
<span class="fc" id="L2347">        zeroes.add(new PairInt(1, -2 - 1));</span>
<span class="fc" id="L2348">        zeroes.add(new PairInt(2, 1 - 1));</span>
<span class="fc" id="L2349">        zeroes.add(new PairInt(2, 0 - 1));</span>
<span class="fc" id="L2350">        zeroes.add(new PairInt(2, -1 - 1));</span>
        
<span class="fc" id="L2352">        ones.add(new PairInt(0, 2 - 1));</span>
<span class="fc" id="L2353">        ones.add(new PairInt(0, 1 - 1));</span>
<span class="fc" id="L2354">        ones.add(new PairInt(0, -1 - 1));</span>
<span class="fc" id="L2355">        ones.add(new PairInt(0, -2 - 1));</span>
<span class="fc" id="L2356">        ones.add(new PairInt(1, 0 - 1));</span>
        
<span class="fc" id="L2358">        changeToZeroes.add(new PairInt(1, 0 - 1));</span>
<span class="fc" id="L2359">        changeToOnes.add(new PairInt(0, 0 - 1));</span>
                
<span class="fc" id="L2361">        int nCorrections = 0;</span>
        
<span class="fc" id="L2363">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L2366">        nCorrections += rotate90ThreeTimes(</span>
            points, imageWidth, imageHeight,
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L2370">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L2371">            Integer.toString(nCorrections));</span>
<span class="fc" id="L2372">    }</span>
    
    private void correctForHoleArtifacts1_2(Set&lt;PairInt&gt; points, int imageWidth,
        int imageHeight) {
        
        /*     
             0  0              2
          0  0  #  #  #        1
             #  0  0  #        0
             #  #  #* 0  0     -1
                   0  0        -2
        
         -3 -2 -1  0  1  2
        */  

<span class="fc" id="L2387">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2388">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2389">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2390">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>

        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L2393">        zeroes.add(new PairInt(-3, -1 - 1));</span>
<span class="fc" id="L2394">        zeroes.add(new PairInt(-2, -1 - 1));</span>
<span class="fc" id="L2395">        zeroes.add(new PairInt(-2, -2 - 1));</span>
<span class="fc" id="L2396">        zeroes.add(new PairInt(-1, 0 - 1));</span>
<span class="fc" id="L2397">        zeroes.add(new PairInt(-1, -2 - 1));</span>
<span class="fc" id="L2398">        zeroes.add(new PairInt(0, 2 - 1));</span>
<span class="fc" id="L2399">        zeroes.add(new PairInt(1, 2 - 1));</span>
<span class="fc" id="L2400">        zeroes.add(new PairInt(1, 1 - 1));</span>
<span class="fc" id="L2401">        zeroes.add(new PairInt(2, 1 - 1));</span>
        
<span class="fc" id="L2403">        ones.add(new PairInt(-2, 1 - 1));</span>
<span class="fc" id="L2404">        ones.add(new PairInt(-2, 0 - 1));</span>
<span class="fc" id="L2405">        ones.add(new PairInt(-1, 1 - 1));</span>
<span class="fc" id="L2406">        ones.add(new PairInt(-1, -1 - 1));</span>
<span class="fc" id="L2407">        ones.add(new PairInt(0, 1 - 1));</span>
<span class="fc" id="L2408">        ones.add(new PairInt(0, -1 - 1));</span>
<span class="fc" id="L2409">        ones.add(new PairInt(1, 0 - 1));</span>
<span class="fc" id="L2410">        ones.add(new PairInt(1, -1 - 1));</span>
        
<span class="fc" id="L2412">        changeToZeroes.add(new PairInt(-2, 0 - 1));</span>
<span class="fc" id="L2413">        changeToZeroes.add(new PairInt(-1, -1 - 1));</span>
<span class="fc" id="L2414">        changeToZeroes.add(new PairInt(-1, 1 - 1));</span>
<span class="fc" id="L2415">        changeToZeroes.add(new PairInt(0, 1 - 1));</span>
<span class="fc" id="L2416">        changeToZeroes.add(new PairInt(0, -1 - 1));</span>
<span class="fc" id="L2417">        changeToZeroes.add(new PairInt(1, 0 - 1));</span>
        
<span class="fc" id="L2419">        changeToOnes.add(new PairInt(-1, 0 - 1));</span>
<span class="fc" id="L2420">        changeToOnes.add(new PairInt(0, 0 - 1));</span>
                
<span class="fc" id="L2422">        int nCorrections = 0;</span>
        
<span class="fc" id="L2424">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L2427">        nCorrections += rotate90ThreeTimes(</span>
            points, imageWidth, imageHeight,
            zeroes, ones, changeToZeroes, changeToOnes);
       
<span class="fc" id="L2431">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L2432">            Integer.toString(nCorrections));</span>
<span class="fc" id="L2433">    }</span>
    
    private void correctForHoleArtifacts1_2_1(Set&lt;PairInt&gt; points, int imageWidth,
        int imageHeight) {
        
        /*     
                               
                #  #  #        2
             #  0  0  #        1
             #  #  #* #        0
        
         -3 -2 -1  0  1  2
        */  

<span class="fc" id="L2447">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2448">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>

        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L2451">        ones.add(new PairInt(-2, 0));</span>
<span class="fc" id="L2452">        ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L2453">        ones.add(new PairInt(-1, 0));</span>
<span class="fc" id="L2454">        ones.add(new PairInt(-1, -2));</span>
<span class="fc" id="L2455">        ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L2456">        ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L2457">        ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L2458">        ones.add(new PairInt(1, -2));</span>
        
<span class="fc" id="L2460">        zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L2461">        zeroes.add(new PairInt(0, -1));        </span>
        
<span class="fc" id="L2463">        int nRotations = 3;</span>
        
<span class="fc" id="L2465">        int nCorrections = replaceAndRotateOnesIfNullable(points, imageWidth, </span>
            imageHeight, zeroes, ones, nRotations);
       
<span class="fc" id="L2468">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L2469">            Integer.toString(nCorrections));</span>
<span class="fc" id="L2470">    }</span>
    
    private void correctForHoleArtifacts1_2_4(Set&lt;PairInt&gt; points, int imageWidth,
        int imageHeight) {
        
        /*     
                #  #  #        2
             #  0  0  #        1
             #  #  #*          0
        
         -3 -2 -1  0  1  2
        */

<span class="fc" id="L2483">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2484">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>

        // y's are inverted here because sketch above is top left is (0, 0)
<span class="fc" id="L2487">        ones.add(new PairInt(-2, 0)); ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L2488">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -2));</span>
<span class="fc" id="L2489">        ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L2490">        ones.add(new PairInt(1, -1)); ones.add(new PairInt(1, -2));</span>
        
<span class="fc" id="L2492">        zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L2493">        zeroes.add(new PairInt(0, -1));</span>
        
<span class="fc" id="L2495">        int nRotations = 1;</span>
        
<span class="fc" id="L2497">        int nCorrections = replaceAndRotateOnesIfNullable(points, imageWidth, </span>
            imageHeight, zeroes, ones, nRotations);
       
<span class="fc" id="L2500">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L2501">            Integer.toString(nCorrections));</span>
<span class="fc" id="L2502">    }</span>
    
    private void correctForHoleArtifacts1_2_5(Set&lt;PairInt&gt; points, int imageWidth,
        int imageHeight) {
        
        /*     
                #  #  #        2
             #  0  0  #        1
                #  #*          0
        
         -3 -2 -1  0  1  2
        */

<span class="fc" id="L2515">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2516">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>

        // y's are inverted here because sketch above is top left is (0, 0)
<span class="fc" id="L2519">        ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L2520">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -2));</span>
<span class="fc" id="L2521">        ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L2522">        ones.add(new PairInt(1, -1)); ones.add(new PairInt(1, -2));</span>
        
<span class="fc" id="L2524">        zeroes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L2525">        zeroes.add(new PairInt(0, -1));</span>
        
<span class="fc" id="L2527">        int nRotations = 1;</span>
        
<span class="fc" id="L2529">        int nCorrections = replaceAndRotateOnesIfNullable(points, imageWidth, </span>
            imageHeight, zeroes, ones, nRotations);
       
<span class="fc" id="L2532">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L2533">            Integer.toString(nCorrections));</span>
<span class="fc" id="L2534">    }</span>
    
    private void correctForHoleArtifacts1_2_6(Set&lt;PairInt&gt; points, int imageWidth,
        int imageHeight) {
        
        /*     
                #  #  #        3
                #  0  #        2
                #  0  #        1
                   #* #        0
        
         -3 -2 -1  0  1  2
        */

<span class="fc" id="L2548">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2549">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>

        // y's are inverted here because sketch above is top left is (0, 0)
<span class="fc" id="L2552">        ones.add(new PairInt(-1, -1)); ones.add(new PairInt(-1, -2)); ones.add(new PairInt(-1, -3));</span>
<span class="fc" id="L2553">        ones.add(new PairInt(0, -3));</span>
<span class="fc" id="L2554">        ones.add(new PairInt(1, 0)); ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L2555">        ones.add(new PairInt(1, -2)); ones.add(new PairInt(1, -3));</span>
        
<span class="fc" id="L2557">        zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
        
<span class="fc" id="L2559">        int nRotations = 1;</span>
        
<span class="fc" id="L2561">        int nCorrections = replaceAndRotateOnesIfNullable(points, imageWidth, </span>
            imageHeight, zeroes, ones, nRotations);
       
<span class="fc" id="L2564">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L2565">            Integer.toString(nCorrections));</span>
<span class="fc" id="L2566">    }</span>
    
    private void correctForHoleArtifacts1_2_7(Set&lt;PairInt&gt; points, int imageWidth,
        int imageHeight) {
        
        /*     
                   #  #        3
                #  0  #        2
                #  0  #        1
                   #* #        0
        
         -3 -2 -1  0  1  2
        */

<span class="fc" id="L2580">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2581">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>

        // y's are inverted here because sketch above is top left is (0, 0)
<span class="fc" id="L2584">        ones.add(new PairInt(-1, -1)); ones.add(new PairInt(-1, -2));</span>
<span class="fc" id="L2585">        ones.add(new PairInt(0, -3));</span>
<span class="fc" id="L2586">        ones.add(new PairInt(1, 0)); ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L2587">        ones.add(new PairInt(1, -2)); ones.add(new PairInt(1, -3));</span>
        
<span class="fc" id="L2589">        zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
        
<span class="fc" id="L2591">        int nRotations = 1;</span>
        
<span class="fc" id="L2593">        int nCorrections = replaceAndRotateOnesIfNullable(points, imageWidth, </span>
            imageHeight, zeroes, ones, nRotations);
       
<span class="fc" id="L2596">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L2597">            Integer.toString(nCorrections));</span>
<span class="fc" id="L2598">    }</span>
    
    private void correctForHoleArtifacts1_2_2(Set&lt;PairInt&gt; points, int imageWidth,
        int imageHeight) {
        
        /*   0  0  0  0  0     4                        4
             0  #  #  #  0     3         .  .  .        3 
             0  #  0  #  #     2         .     #  #     2
             0  #  0  #  0     1         .  @  .        1
             0  #  #* #  0     0         #  .* .        0
                #  0  0  0     -1        #              -1
        
         -3 -2 -1  0  1  2        -3 -2 -1  0  1  2
        */
<span class="fc" id="L2612">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2613">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2614">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2615">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>

        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L2618">        zeroes.add(new PairInt(-2, 0)); zeroes.add(new PairInt(-2, -1));</span>
<span class="fc" id="L2619">        zeroes.add(new PairInt(-2, -2));  zeroes.add(new PairInt(-2, -3)); zeroes.add(new PairInt(-2, -4));</span>
<span class="fc" id="L2620">        zeroes.add(new PairInt(-1, -4));</span>
<span class="fc" id="L2621">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -1)); </span>
<span class="fc" id="L2622">        zeroes.add(new PairInt(0, -2)); zeroes.add(new PairInt(0, -4));</span>
<span class="fc" id="L2623">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -4));</span>
<span class="fc" id="L2624">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0)); zeroes.add(new PairInt(2, -1));</span>
<span class="fc" id="L2625">        zeroes.add(new PairInt(2, -3)); zeroes.add(new PairInt(2, -4));</span>
        
<span class="fc" id="L2627">        ones.add(new PairInt(-1, 1)); ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L2628">        ones.add(new PairInt(-1, -2)); ones.add(new PairInt(-1, -3));</span>
<span class="fc" id="L2629">        ones.add(new PairInt(0, -3));</span>
<span class="fc" id="L2630">        ones.add(new PairInt(1, 0)); ones.add(new PairInt(1, -1)); ones.add(new PairInt(1, -2));</span>
<span class="fc" id="L2631">        ones.add(new PairInt(1, -3));</span>
<span class="fc" id="L2632">        ones.add(new PairInt(2, -2));</span>
        
<span class="fc" id="L2634">        changeToOnes.add(new PairInt(0, -1));</span>
        
<span class="fc" id="L2636">        changeToZeroes.add(new PairInt(-1, -1)); changeToZeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L2637">        changeToZeroes.add(new PairInt(-1, -3));</span>
<span class="fc" id="L2638">        changeToZeroes.add(new PairInt(0, 0)); changeToZeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L2639">        changeToZeroes.add(new PairInt(1, 0)); changeToZeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L2640">        changeToZeroes.add(new PairInt(1, -3));</span>
                    
<span class="fc" id="L2642">        int nCorrections = 0;</span>
      
<span class="fc" id="L2644">        nCorrections += replacePattern(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L2647">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
       
<span class="fc" id="L2650">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L2651">            Integer.toString(nCorrections));</span>
       
<span class="fc" id="L2653">    }</span>
    
    private void correctForHoleArtifacts1_2_3(Set&lt;PairInt&gt; points, int imageWidth,
        int imageHeight) {
        
        /*                                               
           0  0  0  0  0  0  0     3                                 3
           0  #  #  #  #  #  0     2            .  .  .  .  .        2
           0  #  0  0  0  #  0     1            .     @  @  .        1
           #  #  #  #  #* #  0     0         #  #  #  .  .* .        0
              0  #  0  0  0  0     -1           0  #                 -1

          -4 -3 -2 -1  0  1  2        
        */
<span class="fc" id="L2667">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2668">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2669">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2670">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>

        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L2673">        zeroes.add(new PairInt(-4, -1)); zeroes.add(new PairInt(-4, -2)); zeroes.add(new PairInt(-4, -3));</span>
<span class="fc" id="L2674">        zeroes.add(new PairInt(-3, 1)); zeroes.add(new PairInt(-3, -3));</span>
<span class="fc" id="L2675">        zeroes.add(new PairInt(-2, -1)); zeroes.add(new PairInt(-2, -3));</span>
<span class="fc" id="L2676">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -3));</span>
<span class="fc" id="L2677">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -3)); </span>
<span class="fc" id="L2678">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -3));</span>
<span class="fc" id="L2679">        zeroes.add(new PairInt(2, 1)); zeroes.add(new PairInt(2, 0)); zeroes.add(new PairInt(2, -1));</span>
<span class="fc" id="L2680">        zeroes.add(new PairInt(2, -2)); zeroes.add(new PairInt(2, -3));</span>
        
<span class="fc" id="L2682">        ones.add(new PairInt(-4, 0)); </span>
<span class="fc" id="L2683">        ones.add(new PairInt(-3, 0)); ones.add(new PairInt(-3, -1)); ones.add(new PairInt(-3, -2));</span>
<span class="fc" id="L2684">        ones.add(new PairInt(-2, 1)); ones.add(new PairInt(-2, 0)); ones.add(new PairInt(-2, -2));</span>
<span class="fc" id="L2685">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -2));</span>
<span class="fc" id="L2686">        ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L2687">        ones.add(new PairInt(1, 0)); ones.add(new PairInt(1, -1)); ones.add(new PairInt(1, -2));</span>
      
<span class="fc" id="L2689">        changeToOnes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L2690">        changeToOnes.add(new PairInt(0, -1));</span>
        
<span class="fc" id="L2692">        changeToZeroes.add(new PairInt(-3, -1)); changeToZeroes.add(new PairInt(-3, -2));</span>
<span class="fc" id="L2693">        changeToZeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L2694">        changeToZeroes.add(new PairInt(-1, 0)); changeToZeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L2695">        changeToZeroes.add(new PairInt(0, 0)); changeToZeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L2696">        changeToZeroes.add(new PairInt(1, 0)); changeToZeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L2697">        changeToZeroes.add(new PairInt(1, -2));</span>
        
<span class="fc" id="L2699">        int nCorrections = 0;</span>
        
<span class="fc" id="L2701">        nCorrections += replacePattern(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L2704">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
       
<span class="fc" id="L2707">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L2708">            Integer.toString(nCorrections));</span>
       
<span class="fc" id="L2710">    }</span>
    
    private void correctForHoleArtifacts1_3(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*     
             0  0              2
          0  0  #  #           1
          0  #  0  0&lt; #  0     0
                #  #* 0  0     -1
                   0  0        -2
        
         -3 -2 -1  0  1  2
        */  

<span class="fc" id="L2725">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2726">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2727">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2728">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>

        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L2731">        zeroes.add(new PairInt(-3, 0 - 1));</span>
<span class="fc" id="L2732">        zeroes.add(new PairInt(-3, -1 - 1));</span>
<span class="fc" id="L2733">        zeroes.add(new PairInt(-2, -1 - 1));</span>
<span class="fc" id="L2734">        zeroes.add(new PairInt(-2, -2 - 1));</span>
<span class="fc" id="L2735">        zeroes.add(new PairInt(-1, 0 - 1));</span>
<span class="fc" id="L2736">        zeroes.add(new PairInt(-1, -2 - 1));</span>
<span class="fc" id="L2737">        zeroes.add(new PairInt(0, 2 - 1));</span>
<span class="fc" id="L2738">        zeroes.add(new PairInt(1, 2 - 1));</span>
<span class="fc" id="L2739">        zeroes.add(new PairInt(1, 1 - 1));</span>
<span class="fc" id="L2740">        zeroes.add(new PairInt(2, 1 - 1));</span>
<span class="fc" id="L2741">        zeroes.add(new PairInt(2, 0 - 1));</span>
        
<span class="fc" id="L2743">        ones.add(new PairInt(-2, 0 - 1));</span>
<span class="fc" id="L2744">        ones.add(new PairInt(-1, 1 - 1));</span>
<span class="fc" id="L2745">        ones.add(new PairInt(-1, -1 - 1));</span>
<span class="fc" id="L2746">        ones.add(new PairInt(0, 1 - 1));</span>
<span class="fc" id="L2747">        ones.add(new PairInt(0, -1 - 1));</span>
<span class="fc" id="L2748">        ones.add(new PairInt(1, 0 - 1));</span>
        
<span class="fc" id="L2750">        changeToZeroes.add(new PairInt(-2, 0 - 1));</span>
<span class="fc" id="L2751">        changeToZeroes.add(new PairInt(-1, -1 - 1));</span>
<span class="fc" id="L2752">        changeToZeroes.add(new PairInt(-1, 1 - 1));</span>
<span class="fc" id="L2753">        changeToZeroes.add(new PairInt(0, -1 - 1));</span>
<span class="fc" id="L2754">        changeToZeroes.add(new PairInt(0, 1 - 1));</span>
<span class="fc" id="L2755">        changeToZeroes.add(new PairInt(1, 0 - 1));</span>
        
<span class="fc" id="L2757">        changeToOnes.add(new PairInt(-2, 1 - 1));</span>
<span class="fc" id="L2758">        changeToOnes.add(new PairInt(-1, 0 - 1));</span>
<span class="fc" id="L2759">        changeToOnes.add(new PairInt(0, 0 - 1));</span>
<span class="fc" id="L2760">        changeToOnes.add(new PairInt(1, -1 - 1));</span>
                    
<span class="fc" id="L2762">        int nCorrections = 0;</span>
        
<span class="fc" id="L2764">        nCorrections += replacePattern(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L2767">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
       
<span class="fc" id="L2770">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L2771">            Integer.toString(nCorrections));</span>
<span class="fc" id="L2772">    }</span>

    private int replaceAndRotateOnesIfNullable(Set&lt;PairInt&gt; points, 
        int imageWidth, int imageHeight,
        Set&lt;PairInt&gt; zeroes, Set&lt;PairInt&gt; ones, int nRotations) {
        
<span class="fc" id="L2778">        ErosionFilter erosionFilter = new ErosionFilter();</span>
<span class="fc" id="L2779">        erosionFilter.overrideEndOfLineCheck();</span>
        
<span class="fc" id="L2781">        int w = imageWidth;</span>
<span class="fc" id="L2782">        int h = imageHeight;</span>
        
<span class="fc" id="L2784">        int[] neighborsCount = new int[ones.size()];</span>
<span class="fc" id="L2785">        PairInt[] neighbors = new PairInt[neighborsCount.length];</span>
        
<span class="fc" id="L2787">        int nCorrected = 0;</span>
        
<span class="fc bfc" id="L2789" title="All 2 branches covered.">        for (int nRot = 0; nRot &lt;= nRotations; nRot++) {</span>
       
<span class="fc bfc" id="L2791" title="All 4 branches covered.">            switch(nRot) {</span>
                case 1:
<span class="fc" id="L2793">                    reverseXs(zeroes, ones);</span>
<span class="fc" id="L2794">                    break;</span>
                case 2:
<span class="fc" id="L2796">                    reverseYs(zeroes, ones);</span>
<span class="fc" id="L2797">                    break;</span>
                case 3:
<span class="fc" id="L2799">                    reverseXs(zeroes, ones);</span>
<span class="fc" id="L2800">                    break;</span>
                default:
                    break;
            }
            
<span class="fc" id="L2805">            Set&lt;PairInt&gt; tmpPointsRemoved = new HashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2806">            Set&lt;PairInt&gt; tmpPointsAdded = new HashSet&lt;PairInt&gt;();</span>

<span class="fc bfc" id="L2808" title="All 2 branches covered.">            for (PairInt p : points) {</span>

<span class="fc" id="L2810">                int col = p.getX();</span>
<span class="fc" id="L2811">                int row = p.getY();</span>

                // make sure the current point hasn't been added to tmpPointsRemoved
<span class="fc" id="L2814">                boolean isNotPresent = tmpPointsRemoved.contains(p);</span>
<span class="fc bfc" id="L2815" title="All 2 branches covered.">                if (isNotPresent) {</span>
<span class="fc" id="L2816">                    continue;</span>
                }

<span class="fc" id="L2819">                boolean foundPattern = true;</span>

<span class="fc bfc" id="L2821" title="All 2 branches covered.">                for (PairInt p2 : ones) {</span>
<span class="fc" id="L2822">                    int x = col + p2.getX();</span>
<span class="fc" id="L2823">                    int y = row + p2.getY();</span>
<span class="pc bpc" id="L2824" title="2 of 8 branches missed.">                    if ((x &lt; 0) || (y &lt; 0) || (x &gt; (w - 1)) || (y &gt; (h - 1))) {</span>
<span class="fc" id="L2825">                        foundPattern = false;</span>
<span class="fc" id="L2826">                        break;</span>
                    }
<span class="fc" id="L2828">                    PairInt p3 = new PairInt(x, y);</span>
<span class="fc bfc" id="L2829" title="All 2 branches covered.">                    if (tmpPointsRemoved.contains(p3) ||</span>
<span class="fc bfc" id="L2830" title="All 4 branches covered.">                        (!points.contains(p3) &amp;&amp; !tmpPointsAdded.contains(p3))) {</span>
<span class="fc" id="L2831">                        foundPattern = false;</span>
<span class="fc" id="L2832">                        break;</span>
                    }
<span class="fc" id="L2834">                }</span>

<span class="fc bfc" id="L2836" title="All 2 branches covered.">                if (!foundPattern) {</span>
<span class="fc" id="L2837">                    continue;</span>
                }

<span class="fc bfc" id="L2840" title="All 2 branches covered.">                for (PairInt p2 : zeroes) {</span>
<span class="fc" id="L2841">                    int x = col + p2.getX();</span>
<span class="fc" id="L2842">                    int y = row + p2.getY();</span>
<span class="pc bpc" id="L2843" title="4 of 8 branches missed.">                    if ((x &lt; 0) || (y &lt; 0) || (x &gt; (w - 1)) || (y &gt; (h - 1))) {</span>
<span class="nc" id="L2844">                        foundPattern = false;</span>
<span class="nc" id="L2845">                        break;</span>
                    }
<span class="fc" id="L2847">                    PairInt p3 = new PairInt(x, y);</span>
<span class="fc bfc" id="L2848" title="All 2 branches covered.">                    if (!tmpPointsRemoved.contains(p3)</span>
<span class="pc bpc" id="L2849" title="1 of 4 branches missed.">                        &amp;&amp; (points.contains(p3) || tmpPointsAdded.contains(p3))) {</span>
<span class="fc" id="L2850">                        foundPattern = false;</span>
<span class="fc" id="L2851">                        break;</span>
                    }
<span class="fc" id="L2853">                }</span>

<span class="fc bfc" id="L2855" title="All 2 branches covered.">                if (!foundPattern) {</span>
<span class="fc" id="L2856">                    continue;</span>
                }
                
                //change the zeroes to ones.  bounds have been checked
<span class="fc bfc" id="L2860" title="All 2 branches covered.">                for (PairInt p2 : zeroes) {</span>
<span class="fc" id="L2861">                    int x = col + p2.getX();</span>
<span class="fc" id="L2862">                    int y = row + p2.getY();</span>
<span class="fc" id="L2863">                    PairInt p3 = new PairInt(x, y);                    </span>
<span class="fc" id="L2864">                    tmpPointsRemoved.remove(p3);</span>
<span class="fc" id="L2865">                    tmpPointsAdded.add(p3);</span>
<span class="fc" id="L2866">                }</span>
               
<span class="fc" id="L2868">                Arrays.fill(neighborsCount, 0);</span>
<span class="fc" id="L2869">                int nIdx = 0;</span>
<span class="fc bfc" id="L2870" title="All 2 branches covered.">                for (PairInt p2 : ones) {</span>
<span class="fc" id="L2871">                    int x1 = col + p2.getX();</span>
<span class="fc" id="L2872">                    int y1 = row + p2.getY();</span>
<span class="fc" id="L2873">                    PairInt p3 = new PairInt(x1, y1);</span>
<span class="fc" id="L2874">                    neighbors[nIdx] = p3;</span>
<span class="fc" id="L2875">                    int count = 0;</span>
<span class="fc bfc" id="L2876" title="All 2 branches covered.">                    for (int n2Idx = 0; n2Idx &lt; eightNeighborsX.length; ++n2Idx) {</span>
<span class="fc" id="L2877">                        int x2 = x1 + eightNeighborsX[n2Idx];</span>
<span class="fc" id="L2878">                        int y2 = y1 + eightNeighborsY[n2Idx];</span>
<span class="pc bpc" id="L2879" title="4 of 8 branches missed.">                        if ((x2 &lt; 0) || (y2 &lt; 0) || (x2 &gt; (w - 1)) || (y2 &gt; (h - 1))) {</span>
<span class="nc" id="L2880">                            continue;</span>
                        }
<span class="fc" id="L2882">                        PairInt p4 = new PairInt(x2, y2);</span>
<span class="fc bfc" id="L2883" title="All 2 branches covered.">                        if (!tmpPointsRemoved.contains(p4)</span>
<span class="fc bfc" id="L2884" title="All 2 branches covered.">                            &amp;&amp; (tmpPointsAdded.contains(p4) || </span>
<span class="fc bfc" id="L2885" title="All 2 branches covered.">                            points.contains(p4))) {</span>
<span class="fc" id="L2886">                            count++;</span>
                        }
                    }
<span class="fc" id="L2889">                    neighborsCount[nIdx] = count;</span>
<span class="fc" id="L2890">                    nIdx++;</span>
<span class="fc" id="L2891">                }</span>
                
<span class="fc" id="L2893">                CountingSort.sort(neighborsCount, neighbors, 8);</span>

<span class="fc bfc" id="L2895" title="All 2 branches covered.">                for (nIdx = 0; nIdx &lt; neighbors.length; ++nIdx) {</span>
                    
<span class="fc" id="L2897">                    PairInt p3 = neighbors[nIdx];</span>
                    
                    // test if can set to 0's without disconnecting lines

                    // adds to tmpPointsRemoved
<span class="fc" id="L2902">                    boolean nullable = erosionFilter.process(p3, points, </span>
                        tmpPointsAdded, tmpPointsRemoved, w, h);
                }
<span class="fc" id="L2905">            }</span>

<span class="fc" id="L2907">            nCorrected += (tmpPointsRemoved.size() + tmpPointsAdded.size());</span>
            
<span class="fc bfc" id="L2909" title="All 2 branches covered.">            for (PairInt p2 : tmpPointsRemoved) {</span>
<span class="fc" id="L2910">                points.remove(p2);</span>
<span class="fc" id="L2911">            }</span>
<span class="fc bfc" id="L2912" title="All 2 branches covered.">            for (PairInt p2 : tmpPointsAdded) {</span>
<span class="fc" id="L2913">                points.add(p2);</span>
<span class="fc" id="L2914">            }</span>
        }
        
<span class="fc" id="L2917">        return nCorrected;</span>
    }

    private void correctForHoleArtifacts1_1(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*     
             0  0  0  0  #     2
             0  #  #  #        1
             0  #  #* 0        0
             0  #  0           -1
             #
         -3 -2 -1  0  1  2
        */  

<span class="nc" id="L2932">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="nc" id="L2933">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="nc" id="L2934">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="nc" id="L2935">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>

        // y's are inverted here because sketch above is top left is (0,0)
<span class="nc" id="L2938">        zeroes.add(new PairInt(-2, 1));</span>
<span class="nc" id="L2939">        zeroes.add(new PairInt(-2, 0));</span>
<span class="nc" id="L2940">        zeroes.add(new PairInt(-2, -1));</span>
<span class="nc" id="L2941">        zeroes.add(new PairInt(-2, -2));</span>
<span class="nc" id="L2942">        zeroes.add(new PairInt(-1, -2));</span>
<span class="nc" id="L2943">        zeroes.add(new PairInt(0, 1));</span>
<span class="nc" id="L2944">        zeroes.add(new PairInt(0, -2));</span>
<span class="nc" id="L2945">        zeroes.add(new PairInt(1, 0));</span>
<span class="nc" id="L2946">        zeroes.add(new PairInt(1, -2));</span>
         
<span class="nc" id="L2948">        ones.add(new PairInt(-2, 2));</span>
<span class="nc" id="L2949">        ones.add(new PairInt(-1, 1));</span>
<span class="nc" id="L2950">        ones.add(new PairInt(-1, 0));</span>
<span class="nc" id="L2951">        ones.add(new PairInt(-1, -1));</span>
<span class="nc" id="L2952">        ones.add(new PairInt(0, -1));</span>
<span class="nc" id="L2953">        ones.add(new PairInt(1, -1));</span>
<span class="nc" id="L2954">        ones.add(new PairInt(2, -2));</span>
        
<span class="nc" id="L2956">        changeToZeroes.add(new PairInt(-1, -1));</span>
<span class="nc" id="L2957">        changeToZeroes.add(new PairInt(-1, 0));</span>
<span class="nc" id="L2958">        changeToZeroes.add(new PairInt(0, -1));</span>
           
<span class="nc" id="L2960">        int nCorrections = 0;</span>
        
<span class="nc" id="L2962">        nCorrections += replacePattern(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="nc" id="L2965">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
       
<span class="nc" id="L2968">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="nc" id="L2969">            Integer.toString(nCorrections));</span>
<span class="nc" id="L2970">    }</span>

    private void correctForZigZag000_00(Set&lt;PairInt&gt; points, 
        int imageWidth, int imageHeight) {
        
        /* diagonal lines on both sides of a narrow cavity are sometimes
           zig-zag and can be thinned in the direction of widening the
           cavity.
                                3                          3
                   0 #          2             0 #          2
                 # # 0 #        1           # . 0 #        1
                 0 # #*0 #      0             # .*0        0
                   0 #         -1               #         -1
        
        -6-5-4-3-2-1 0 1 2 3       -6-5-4-3-2-1 0 1 2 3
        */
<span class="fc" id="L2986">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2987">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2988">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L2989">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
        
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L2992">        zeroes.add(new PairInt(-2, 0));</span>
<span class="fc" id="L2993">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L2994">        zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L2995">        zeroes.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L2997">        ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L2998">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L2999">        ones.add(new PairInt(0, 1)); ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L3000">        ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L3001">        ones.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L3003">        changeToZeroes.add(new PairInt(-1, -1)); </span>
<span class="fc" id="L3004">        changeToZeroes.add(new PairInt(0, 0));</span>
                
<span class="fc" id="L3006">        int nCorrections = 0;</span>
        
<span class="fc" id="L3008">        nCorrections += replacePattern(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
        // ----- change the sign of x to handle other direction -----
<span class="fc" id="L3012">        reverseXs(zeroes, ones, changeToZeroes, changeToOnes);</span>
        
<span class="fc" id="L3014">        nCorrections += replacePattern(</span>
            points, imageWidth, imageHeight,
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3018">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3019">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3020">    }</span>

    private void correctForZigZag000_01(Set&lt;PairInt&gt; points, 
        int imageWidth, int imageHeight) {
        
        /* diagonal lines on both sides of a narrow cavity are sometimes
           zig-zag and can be thinned in the direction of widening the
           cavity.
                                3                          3
                     # #        2               #          2
                   # 0 # #      1             # 0 .        1
                     #*0 # #    0               #*0 .      0
                       #       -1                 #       -1
        
        -6-5-4-3-2-1 0 1 2 3       -6-5-4-3-2-1 0 1 2 3
        */
<span class="fc" id="L3036">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3037">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3038">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3039">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
        
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3042">        zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L3043">        zeroes.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L3045">        ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L3046">        ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L3047">        ones.add(new PairInt(1, 1)); ones.add(new PairInt(1, -1)); ones.add(new PairInt(1, -2));</span>
<span class="fc" id="L3048">        ones.add(new PairInt(2, 0)); ones.add(new PairInt(2, -1));</span>
<span class="fc" id="L3049">        ones.add(new PairInt(3, 0));</span>
        
<span class="fc" id="L3051">        changeToZeroes.add(new PairInt(1, -1)); </span>
<span class="fc" id="L3052">        changeToZeroes.add(new PairInt(2, 0));</span>
                
<span class="fc" id="L3054">        int nCorrections = 0;</span>
        
<span class="fc" id="L3056">        nCorrections += replacePattern(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
        // ----- change the sign of x to handle other direction -----
<span class="fc" id="L3060">        reverseXs(zeroes, ones, changeToZeroes, changeToOnes);</span>
        
<span class="fc" id="L3062">        nCorrections += replacePattern(</span>
            points, imageWidth, imageHeight,
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3066">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3067">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3068">    }</span>
    
    private void correctForZigZag000_02(Set&lt;PairInt&gt; points, 
        int imageWidth, int imageHeight) {
        
        /* diagonal lines on both sides of a narrow cavity are sometimes
           zig-zag and can be thinned in the direction of widening the
           cavity.
                                3                          3
                     # #        2               #          2
                   # 0 # #      1             # 0 .        1
                     #*0 #      0               #*0        0
                       #       -1                 #       -1
        
        -6-5-4-3-2-1 0 1 2 3       -6-5-4-3-2-1 0 1 2 3
        */
<span class="fc" id="L3084">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3085">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3086">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3087">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
        
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3090">        zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L3091">        zeroes.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L3093">        ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L3094">        ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L3095">        ones.add(new PairInt(1, 1)); ones.add(new PairInt(1, -1)); ones.add(new PairInt(1, -2));</span>
<span class="fc" id="L3096">        ones.add(new PairInt(2, 0)); ones.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L3098">        changeToZeroes.add(new PairInt(1, -1)); </span>
                
<span class="fc" id="L3100">        int nCorrections = 0;</span>
        
<span class="fc" id="L3102">        nCorrections += replacePattern(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
        // ----- change the sign of x to handle other direction -----
<span class="fc" id="L3106">        reverseXs(zeroes, ones, changeToZeroes, changeToOnes);</span>
        
<span class="fc" id="L3108">        nCorrections += replacePattern(</span>
            points, imageWidth, imageHeight,
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3112">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3113">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3114">    }</span>
    
    private void correctForZigZag000_04(Set&lt;PairInt&gt; points, 
        int imageWidth, int imageHeight) {
        
        /*
                                3                           3
               # 0 0 0          2         # 0 0 0          2
               0 # # 0 0        1         0 # #&lt;0 0        1
                 0 # #*0        0           0 # #&lt;0        0
                     0 0       -1               0 0       -1
        
        -6-5-4-3-2-1 0 1 2 3       -6-5-4-3-2-1 0 1 2 3
        */
<span class="fc" id="L3128">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3129">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3130">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3131">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
        
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3134">        zeroes.add(new PairInt(-3, -1));</span>
<span class="fc" id="L3135">        zeroes.add(new PairInt(-2, 0)); zeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L3136">        zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3137">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L3138">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L3140">        ones.add(new PairInt(-3, -2));</span>
<span class="fc" id="L3141">        ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L3142">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -1));</span>
        
<span class="fc" id="L3144">        changeToZeroes.add(new PairInt(0, 0));</span>
<span class="fc" id="L3145">        changeToZeroes.add(new PairInt(-1, -1));</span>
                
<span class="fc" id="L3147">        int nCorrections = 0;</span>
        
<span class="fc" id="L3149">        nCorrections += replacePattern(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
        // ----- change the sign of x to handle other direction -----
<span class="fc" id="L3153">        reverseXs(zeroes, ones, changeToZeroes, changeToOnes);</span>
        
<span class="fc" id="L3155">        nCorrections += replacePattern(</span>
            points, imageWidth, imageHeight,
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3159">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3160">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3161">    }</span>
    
    private void correctForZigZag000_03(Set&lt;PairInt&gt; points, 
        int imageWidth, int imageHeight) {
        
        /* diagonal lines on both sides of a narrow cavity are sometimes
           zig-zag and can be thinned in the direction of widening the
           cavity.
                                3                          3
                   0 # #        2             0 #          2
                 # # 0 # #      1           # . 0 #        1
                 # # #*0 #      0             # .*0        0
                   # #         -1               #         -1
        
        -6-5-4-3-2-1 0 1 2 3       -6-5-4-3-2-1 0 1 2 3
        */
<span class="fc" id="L3177">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3178">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3179">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3180">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
        
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3183">        zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3184">        zeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L3185">        zeroes.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L3187">        ones.add(new PairInt(-2, -1)); ones.add(new PairInt(-2, 0));</span>
<span class="fc" id="L3188">        ones.add(new PairInt(-1, 1)); ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L3189">        ones.add(new PairInt(0, 1)); ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L3190">        ones.add(new PairInt(1, -1)); ones.add(new PairInt(1, -2));</span>
<span class="fc" id="L3191">        ones.add(new PairInt(2, 0)); ones.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L3193">        changeToZeroes.add(new PairInt(-1, -1)); </span>
<span class="fc" id="L3194">        changeToZeroes.add(new PairInt(0, 0));</span>
                
<span class="fc" id="L3196">        int nCorrections = 0;</span>
        
<span class="fc" id="L3198">        nCorrections += replacePattern(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
        // ----- change the sign of x to handle other direction -----
<span class="fc" id="L3202">        reverseXs(zeroes, ones, changeToZeroes, changeToOnes);</span>
        
<span class="fc" id="L3204">        nCorrections += replacePattern(</span>
            points, imageWidth, imageHeight,
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3208">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3209">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3210">    }</span>

    private void correctForZigZag000_05(Set&lt;PairInt&gt; points, 
        int imageWidth, int imageHeight) {
        
        /* diagonal lines on both sides of a narrow cavity are sometimes
           zig-zag and can be thinned in the direction of widening the
           cavity.
                                3                          3
                 # 0 0 0        2           #              2
               0 #.# 0 0 0      1           #.#            1
               0 0 #.#*0 0      0             #.#*         0
                 0 0 #         -1               #         -1
        
        -6-5-4-3-2-1 0 1 2 3       -6-5-4-3-2-1 0 1 2 3
        */
<span class="fc" id="L3226">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3227">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3228">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3229">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
        
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3232">        zeroes.add(new PairInt(-3, 0)); zeroes.add(new PairInt(-3, -1));</span>
<span class="fc" id="L3233">        zeroes.add(new PairInt(-2, 1)); zeroes.add(new PairInt(-2, 0));</span>
<span class="fc" id="L3234">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3235">        zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L3236">        zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, -1)); zeroes.add(new PairInt(1, -2));</span>
<span class="fc" id="L3237">        zeroes.add(new PairInt(2, 0)); zeroes.add(new PairInt(2, -1));</span>
        
<span class="fc" id="L3239">        ones.add(new PairInt(-2, -1)); ones.add(new PairInt(-2, -2));</span>
<span class="fc" id="L3240">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L3241">        ones.add(new PairInt(0, 1)); ones.add(new PairInt(0, 0));</span>
        
<span class="fc" id="L3243">        changeToZeroes.add(new PairInt(-2, -1)); </span>
<span class="fc" id="L3244">        changeToZeroes.add(new PairInt(-1, 0));</span>
         
<span class="fc" id="L3246">        int nCorrections = 0;</span>
        
<span class="fc" id="L3248">        nCorrections += replacePattern(points, imageWidth, imageHeight, </span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
        // ----- change the sign of x to handle other direction -----
<span class="fc" id="L3252">        reverseXs(zeroes, ones, changeToZeroes, changeToOnes);</span>
        
<span class="fc" id="L3254">        nCorrections += replacePattern(</span>
            points, imageWidth, imageHeight,
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3258">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3259">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3260">    }</span>
    
    public static int correctForHoleArtifacts00_10(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
<span class="fc" id="L3265">        int w = imageWidth;</span>
<span class="fc" id="L3266">        int h = imageHeight;</span>
        
<span class="fc" id="L3268">        int[] neighborsCount = new int[8];</span>
<span class="fc" id="L3269">        int[] neighborsIdx = new int[8];</span>
        
        /*
                   #         2
                #  0  #      1
                   #*        0
                               
         -3 -2 -1  0  1  2
        */
                
<span class="fc" id="L3279">        Set&lt;PairInt&gt; ones = new HashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3282">        ones.add(new PairInt(-1, -1));</span>
<span class="fc" id="L3283">        ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L3284">        ones.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L3286">        ErosionFilter erosionFilter = new ErosionFilter();</span>
<span class="fc" id="L3287">        erosionFilter.overrideEndOfLineCheck();</span>
                        
<span class="fc" id="L3289">        Set&lt;PairInt&gt; tmpPointsRemoved = new HashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3290">        Set&lt;PairInt&gt; tmpPointsAdded = new HashSet&lt;PairInt&gt;();</span>

<span class="fc bfc" id="L3292" title="All 2 branches covered.">        for (PairInt p : points) {</span>

<span class="fc" id="L3294">            int col = p.getX();</span>
<span class="fc" id="L3295">            int row = p.getY();</span>

            // make sure the current point hasn't been added to tmpPointsRemoved
<span class="fc" id="L3298">            boolean isNotPresent = tmpPointsRemoved.contains(p);</span>
<span class="fc bfc" id="L3299" title="All 2 branches covered.">            if (isNotPresent) {</span>
<span class="fc" id="L3300">                continue;</span>
            }

<span class="fc" id="L3303">            boolean foundPattern = true;</span>

<span class="fc bfc" id="L3305" title="All 2 branches covered.">            for (PairInt p2 : ones) {</span>
<span class="fc" id="L3306">                int x = col + p2.getX();</span>
<span class="fc" id="L3307">                int y = row + p2.getY();</span>
<span class="pc bpc" id="L3308" title="1 of 8 branches missed.">                if ((x &lt; 0) || (y &lt; 0) || (x &gt; (w - 1)) || (y &gt; (h - 1))) {</span>
<span class="fc" id="L3309">                    foundPattern = false;</span>
<span class="fc" id="L3310">                    break;</span>
                }
<span class="fc" id="L3312">                PairInt p3 = new PairInt(x, y);</span>
<span class="fc bfc" id="L3313" title="All 2 branches covered.">                if (tmpPointsRemoved.contains(p3) ||</span>
<span class="fc bfc" id="L3314" title="All 4 branches covered.">                    (!points.contains(p3) &amp;&amp; !tmpPointsAdded.contains(p3))) {</span>
<span class="fc" id="L3315">                    foundPattern = false;</span>
<span class="fc" id="L3316">                    break;</span>
                }
<span class="fc" id="L3318">            }</span>

<span class="fc bfc" id="L3320" title="All 2 branches covered.">            if (!foundPattern) {</span>
<span class="fc" id="L3321">                continue;</span>
            }
            
            /*
            set the center value to zero.
            visit each of the 8 neighbors and count the number of neighbors
            it has.
            sort those by count.
            visit the smallest count neighbors (w/ count &gt; 0) and test
               if nullable.
            */
            
<span class="fc" id="L3333">            int centerRow = row - 1;</span>
            
            // set the center point
<span class="fc" id="L3336">            PairInt p3 = new PairInt(col, centerRow);</span>
<span class="fc" id="L3337">            tmpPointsRemoved.remove(p3);</span>
<span class="fc" id="L3338">            tmpPointsAdded.add(p3);</span>

<span class="fc" id="L3340">            Arrays.fill(neighborsCount, 0);</span>
<span class="fc" id="L3341">            Arrays.fill(neighborsIdx, 0);</span>
<span class="fc bfc" id="L3342" title="All 2 branches covered.">            for (int n1Idx = 0; n1Idx &lt; eightNeighborsX.length; ++n1Idx) {</span>
<span class="fc" id="L3343">                int x1 = col + eightNeighborsX[n1Idx];</span>
<span class="fc" id="L3344">                int y1 = centerRow + eightNeighborsY[n1Idx];                </span>
<span class="fc" id="L3345">                neighborsIdx[n1Idx] = n1Idx;</span>
<span class="pc bpc" id="L3346" title="4 of 8 branches missed.">                if ((x1 &lt; 0) || (y1 &lt; 0) || (x1 &gt; (w - 1)) || (y1 &gt; (h - 1))) {</span>
<span class="nc" id="L3347">                    neighborsCount[n1Idx] = 0;</span>
<span class="nc" id="L3348">                    continue;</span>
                }
<span class="fc" id="L3350">                int count = 0;</span>
                // count the neighbors of the neighbor
<span class="fc bfc" id="L3352" title="All 2 branches covered.">                for (int n2Idx = 0; n2Idx &lt; eightNeighborsX.length; ++n2Idx) {</span>
<span class="fc" id="L3353">                    int x2 = x1 + eightNeighborsX[n2Idx];</span>
<span class="fc" id="L3354">                    int y2 = y1 + eightNeighborsY[n2Idx];                </span>
<span class="pc bpc" id="L3355" title="4 of 8 branches missed.">                    if ((x2 &lt; 0) || (y2 &lt; 0) || (x2 &gt; (w - 1)) || (y2 &gt; (h - 1))) {</span>
<span class="nc" id="L3356">                        continue;</span>
                    }
<span class="fc" id="L3358">                    PairInt p4 = new PairInt(x2, y2);</span>
<span class="fc bfc" id="L3359" title="All 2 branches covered.">                    if (!tmpPointsRemoved.contains(p4) &amp;&amp; </span>
<span class="fc bfc" id="L3360" title="All 4 branches covered.">                        (tmpPointsAdded.contains(p4) || points.contains(p4))) {</span>
<span class="fc" id="L3361">                        count++;</span>
                    }
                }
<span class="fc" id="L3364">                neighborsCount[n1Idx] = count;</span>
            }
<span class="fc" id="L3366">            CountingSort.sort(neighborsCount, neighborsIdx, 8);</span>

<span class="fc bfc" id="L3368" title="All 2 branches covered.">            for (int ii = 0; ii &lt; neighborsIdx.length; ++ii) {</span>
                
<span class="pc bpc" id="L3370" title="1 of 2 branches missed.">                if (neighborsCount[ii] == 0) {</span>
<span class="nc" id="L3371">                    continue;</span>
                }
                
<span class="fc" id="L3374">                int nIdx = neighborsIdx[ii];</span>
                
<span class="fc" id="L3376">                int x2 = col + eightNeighborsX[nIdx];</span>
<span class="fc" id="L3377">                int y2 = centerRow + eightNeighborsY[nIdx];</span>
                
<span class="fc" id="L3379">                PairInt p4 = new PairInt(x2, y2);</span>

                // adds to tmpPointsRemoved
<span class="fc" id="L3382">                boolean nullable = erosionFilter.process(p4, points, </span>
                    tmpPointsAdded, tmpPointsRemoved, w, h);
               
            }
<span class="fc" id="L3386">        }</span>
        
<span class="fc" id="L3388">        int nCorrections = tmpPointsRemoved.size() + tmpPointsAdded.size();</span>

<span class="fc bfc" id="L3390" title="All 2 branches covered.">        for (PairInt p2 : tmpPointsRemoved) {</span>
<span class="fc" id="L3391">            points.remove(p2);</span>
<span class="fc" id="L3392">        }</span>
<span class="fc bfc" id="L3393" title="All 2 branches covered.">        for (PairInt p2 : tmpPointsAdded) {</span>
<span class="fc" id="L3394">            points.add(p2);</span>
<span class="fc" id="L3395">        }</span>
        
<span class="fc" id="L3397">        Logger.getLogger(PostLineThinnerCorrections.class.getName())</span>
<span class="fc" id="L3398">            .fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3399">            Integer.toString(nCorrections));</span>
        
<span class="fc" id="L3401">        return nCorrections;</span>
    }

    private void correctForCorrectionCreatedSquares(Set&lt;PairInt&gt; points, 
        int imageWidth, int imageHeight) {
        
<span class="fc" id="L3407">        int w = imageWidth;</span>
<span class="fc" id="L3408">        int h = imageHeight;</span>
        
        /*
        Find a filled in 2x2 square.
       
                   #  #      1
                   #* #      0
                               
         -3 -2 -1  0  1  2
        
         -- expand the region to the surrounding pixels and for each,
           null them if possible
        */
                
<span class="fc" id="L3422">        Set&lt;PairInt&gt; ones = new HashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3425">        ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L3426">        ones.add(new PairInt(1, 0));</span>
<span class="fc" id="L3427">        ones.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L3429">        ErosionFilter erosionFilter = new ErosionFilter();</span>
<span class="fc" id="L3430">        erosionFilter.overrideEndOfLineCheck();</span>
                        
<span class="fc" id="L3432">        Set&lt;PairInt&gt; tmpPointsRemoved = new HashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3433">        Set&lt;PairInt&gt; tmpPointsAdded = new HashSet&lt;PairInt&gt;();</span>

<span class="fc bfc" id="L3435" title="All 2 branches covered.">        for (PairInt p : points) {</span>

<span class="fc" id="L3437">            int col = p.getX();</span>
<span class="fc" id="L3438">            int row = p.getY();</span>

            // make sure the current point hasn't been added to tmpPointsRemoved
<span class="fc" id="L3441">            boolean isNotPresent = tmpPointsRemoved.contains(p);</span>
<span class="fc bfc" id="L3442" title="All 2 branches covered.">            if (isNotPresent) {</span>
<span class="fc" id="L3443">                continue;</span>
            }

<span class="fc" id="L3446">            boolean foundPattern = true;</span>

<span class="fc bfc" id="L3448" title="All 2 branches covered.">            for (PairInt p2 : ones) {</span>
<span class="fc" id="L3449">                int x = col + p2.getX();</span>
<span class="fc" id="L3450">                int y = row + p2.getY();</span>
<span class="pc bpc" id="L3451" title="4 of 8 branches missed.">                if ((x &lt; 0) || (y &lt; 0) || (x &gt; (w - 1)) || (y &gt; (h - 1))) {</span>
<span class="nc" id="L3452">                    foundPattern = false;</span>
<span class="nc" id="L3453">                    break;</span>
                }
<span class="fc" id="L3455">                PairInt p3 = new PairInt(x, y);</span>
<span class="fc bfc" id="L3456" title="All 2 branches covered.">                if (tmpPointsRemoved.contains(p3) ||</span>
<span class="pc bpc" id="L3457" title="1 of 4 branches missed.">                    (!points.contains(p3) &amp;&amp; !tmpPointsAdded.contains(p3))) {</span>
<span class="fc" id="L3458">                    foundPattern = false;</span>
<span class="fc" id="L3459">                    break;</span>
                }
<span class="fc" id="L3461">            }</span>

<span class="fc bfc" id="L3463" title="All 2 branches covered.">            if (!foundPattern) {</span>
<span class="fc" id="L3464">                continue;</span>
            }
            
            /*
            visit each of the surrounding pixels and the center 4 in order
            of smallest number of neighbors, and null the ones which are 
            nullable without disconnecting lines.
            
                    +  +  +  +   2
                    +  #  #  +   1
                    +  #* #  +   0
                    +  +  +  +  -1
        
             -3 -2 -1  0  1  2
            */
            
<span class="fc" id="L3480">            int nn = 0;</span>
<span class="fc" id="L3481">            int[] neighborsCount = new int[16];</span>
<span class="fc" id="L3482">            PairInt[] neighbors = new PairInt[16];</span>
            
<span class="fc bfc" id="L3484" title="All 2 branches covered.">            for (int ii = -1; ii &lt;= 2; ++ii) {</span>
<span class="fc bfc" id="L3485" title="All 2 branches covered.">                for (int jj = -2; jj &lt;= 1; ++jj) {</span>
                    
<span class="fc" id="L3487">                    int x1 = col + ii;</span>
<span class="fc" id="L3488">                    int y1 = row + jj;</span>
                    
<span class="pc bpc" id="L3490" title="4 of 8 branches missed.">                    if ((x1 &lt; 0) || (y1 &lt; 0) || (x1 &gt; (w - 1)) || (y1 &gt; (h - 1))) {</span>
<span class="nc" id="L3491">                        continue;</span>
                    }
<span class="fc" id="L3493">                    PairInt p3 = new PairInt(x1, y1);</span>
<span class="fc bfc" id="L3494" title="All 2 branches covered.">                    if (tmpPointsRemoved.contains(p3) || </span>
<span class="pc bpc" id="L3495" title="1 of 4 branches missed.">                        (!tmpPointsAdded.contains(p3) &amp;&amp; !points.contains(p3))) {</span>
<span class="fc" id="L3496">                        continue;</span>
                    }

<span class="fc" id="L3499">                    neighbors[nn] = p3;</span>
                    
<span class="fc" id="L3501">                    int count = 0;</span>
                    // count the neighbors of the neighbor
<span class="fc bfc" id="L3503" title="All 2 branches covered.">                    for (int n2Idx = 0; n2Idx &lt; eightNeighborsX.length; ++n2Idx) {</span>
<span class="fc" id="L3504">                        int x2 = x1 + eightNeighborsX[n2Idx];</span>
<span class="fc" id="L3505">                        int y2 = y1 + eightNeighborsY[n2Idx];                </span>
<span class="pc bpc" id="L3506" title="4 of 8 branches missed.">                        if ((x2 &lt; 0) || (y2 &lt; 0) || (x2 &gt; (w - 1)) || (y2 &gt; (h - 1))) {</span>
<span class="nc" id="L3507">                            continue;</span>
                        }
<span class="fc" id="L3509">                        PairInt p4 = new PairInt(x2, y2);</span>
<span class="fc bfc" id="L3510" title="All 2 branches covered.">                        if (!tmpPointsRemoved.contains(p4) &amp;&amp; </span>
<span class="pc bpc" id="L3511" title="1 of 4 branches missed.">                            (tmpPointsAdded.contains(p4) || points.contains(p4))) {</span>
<span class="fc" id="L3512">                            count++;</span>
                        }
                    }
                    
<span class="fc" id="L3516">                    neighborsCount[nn] = count;</span>
<span class="fc" id="L3517">                    nn++;</span>
                }
            }
            
<span class="fc" id="L3521">            neighbors = Arrays.copyOf(neighbors, nn);</span>
<span class="fc" id="L3522">            neighborsCount = Arrays.copyOf(neighborsCount, nn);</span>
            
<span class="fc" id="L3524">            CountingSort.sort(neighborsCount, neighbors, 8);</span>

<span class="fc bfc" id="L3526" title="All 2 branches covered.">            for (int ii = 0; ii &lt; neighbors.length; ++ii) {</span>
<span class="pc bpc" id="L3527" title="1 of 2 branches missed.">                if (neighborsCount[ii] == 0) {</span>
<span class="nc" id="L3528">                    continue;</span>
                }
<span class="fc" id="L3530">                PairInt p3 = neighbors[ii]; </span>
                // adds to tmpPointsRemoved

<span class="fc" id="L3533">                boolean nullable = erosionFilter.process(p3, points, </span>
                    tmpPointsAdded, tmpPointsRemoved, w, h);
            }
<span class="fc" id="L3536">        }</span>

<span class="fc" id="L3538">        int nCorrections = tmpPointsRemoved.size() + tmpPointsAdded.size();</span>
        
<span class="fc bfc" id="L3540" title="All 2 branches covered.">        for (PairInt p2 : tmpPointsRemoved) {</span>
<span class="fc" id="L3541">            points.remove(p2);</span>
<span class="fc" id="L3542">        }</span>
<span class="pc bpc" id="L3543" title="1 of 2 branches missed.">        for (PairInt p2 : tmpPointsAdded) {</span>
<span class="nc" id="L3544">            points.add(p2);</span>
<span class="nc" id="L3545">        }</span>
        
<span class="fc" id="L3547">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3548">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3549">    }</span>

    protected void straightenLines(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
<span class="fc bfc" id="L3554" title="All 2 branches covered.">        if (edgeGuideImage == null) {</span>
<span class="fc" id="L3555">            return;</span>
        }
       
<span class="fc" id="L3558">        MiscellaneousCurveHelper curveHelper = new MiscellaneousCurveHelper();</span>
<span class="fc" id="L3559">        curveHelper.straightenLines(points, edgeGuideImage);</span>

<span class="fc" id="L3561">    }</span>
    
    private void correctForSingleHole_01(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*
          0  0  0  0  0         3                           3
          0  0  #  #  0         2           .  .            2
          0  #  0  #  #         1        .  0  .  #         1
          0  #  #  #* 0         0        .  #  #*           0
             #  0  0  0        -1        #                 -1
         -3 -2 -1  0  1  2  3        -3 -2 -1  0  1  2  3  
        */
        
<span class="fc" id="L3575">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3576">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3577">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3578">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3581">        zeroes.add(new PairInt(-3, 0)); zeroes.add(new PairInt(-3, -1));</span>
<span class="fc" id="L3582">        zeroes.add(new PairInt(-3, -2)); zeroes.add(new PairInt(-3, -3));</span>
<span class="fc" id="L3583">        zeroes.add(new PairInt(-2, -2)); zeroes.add(new PairInt(-2, -3));</span>
<span class="fc" id="L3584">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -3));</span>
<span class="fc" id="L3585">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L3586">        zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -2)); zeroes.add(new PairInt(1, -3));</span>
        
<span class="fc" id="L3588">        ones.add(new PairInt(-2, 1)); ones.add(new PairInt(-2, 0)); ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L3589">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3590">        ones.add(new PairInt(0, -1)); ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L3591">        ones.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L3593">        changeToZeroes.add(new PairInt(-2, -1));</span>
<span class="fc" id="L3594">        changeToZeroes.add(new PairInt(-2, 0));</span>
<span class="fc" id="L3595">        changeToZeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3596">        changeToZeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L3597">        changeToZeroes.add(new PairInt(0, -1));</span>
        
<span class="fc" id="L3599">        int nCorrections = 0;</span>
        
<span class="fc" id="L3601">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3604">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3607">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3608">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3609">    }</span>
    
    private void correctForSingleHole_02(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*    
          0  0  0  0  0         3                           3
          0  0  #  0  0         2           .               2
          0  #  0  #  0         1        .  0  .            1
          0  #  #  #* #         0        .  #  #* #         0
             #  0  0  0        -1        #                 -1
         -3 -2 -1  0  1  2           -3 -2 -1  0  1  2        
        */
        
<span class="fc" id="L3623">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3624">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3625">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3626">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3629">        zeroes.add(new PairInt(-3, 0)); zeroes.add(new PairInt(-3, -1)); </span>
<span class="fc" id="L3630">        zeroes.add(new PairInt(-3, -2)); zeroes.add(new PairInt(-3, -3));</span>
<span class="fc" id="L3631">        zeroes.add(new PairInt(-2, -2)); zeroes.add(new PairInt(-2, -3));</span>
<span class="fc" id="L3632">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -3));</span>
<span class="fc" id="L3633">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -2)); zeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L3634">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1)); </span>
<span class="fc" id="L3635">        zeroes.add(new PairInt(1, -2)); zeroes.add(new PairInt(1, -3));</span>
        
<span class="fc" id="L3637">        ones.add(new PairInt(-2, 1)); ones.add(new PairInt(-2, 0)); ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L3638">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3639">        ones.add(new PairInt(0, -1));</span>
<span class="fc" id="L3640">        ones.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L3642">        changeToZeroes.add(new PairInt(-2, -1)); changeToZeroes.add(new PairInt(-2, 0));</span>
<span class="fc" id="L3643">        changeToZeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3644">        changeToZeroes.add(new PairInt(0, -1));</span>

<span class="fc" id="L3646">        int nCorrections = 0;</span>
        
<span class="fc" id="L3648">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3651">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3654">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3655">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3656">    }</span>
    
    private void correctForSingleHole_03(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*    
          0  0  0  0  0         3                           3
          0  0  #  #  0         2           .  .            2
          0  #  0  #  #         1        .  0  .  #         1
          0  #  #  #* 0         0        .  .  #*           0
          0  0  #  0  0        -1           #              -1
         -3 -2 -1  0  1  2  3        -3 -2 -1  0  1  2  3  
        */
        
<span class="fc" id="L3670">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3671">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3672">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3673">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3676">        zeroes.add(new PairInt(-3, 1)); zeroes.add(new PairInt(-3, 0)); zeroes.add(new PairInt(-3, -1));</span>
<span class="fc" id="L3677">        zeroes.add(new PairInt(-3, -2)); zeroes.add(new PairInt(-3, -3));</span>
<span class="fc" id="L3678">        zeroes.add(new PairInt(-2, 1)); zeroes.add(new PairInt(-2, -2)); zeroes.add(new PairInt(-2, -3));</span>
<span class="fc" id="L3679">        zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -3));</span>
<span class="fc" id="L3680">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L3681">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, 0)); </span>
<span class="fc" id="L3682">        zeroes.add(new PairInt(1, -2)); zeroes.add(new PairInt(1, -3));</span>
        
<span class="fc" id="L3684">        ones.add(new PairInt(-2, 0)); ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L3685">        ones.add(new PairInt(-1, 1)); ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3686">        ones.add(new PairInt(0, -1)); ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L3687">        ones.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L3689">        changeToZeroes.add(new PairInt(-2, 0)); changeToZeroes.add(new PairInt(-2, -1));</span>
<span class="fc" id="L3690">        changeToZeroes.add(new PairInt(-1, 0)); changeToZeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3691">        changeToZeroes.add(new PairInt(0, -1)); changeToZeroes.add(new PairInt(0, -2));</span>
                    
<span class="fc" id="L3693">        int nCorrections = 0;</span>
        
<span class="fc" id="L3695">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3698">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3701">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3702">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3703">    }</span>
    
    private void correctForSingleHole_04(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*    
          0  0  0  0  0         3                           3
          0  0  #  #  0         2           .  .            2
          0  #  0  #  0         1        .  0  .            1
          0  #  #  #* #         0        .  .  #*           0
          0  0  #  0  0        -1           #              -1
         -3 -2 -1  0  1  2  3        -3 -2 -1  0  1  2  3  
        */
        
<span class="fc" id="L3717">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3718">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3719">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3720">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3723">        zeroes.add(new PairInt(-3, 1)); zeroes.add(new PairInt(-3, 0)); zeroes.add(new PairInt(-3, -1));</span>
<span class="fc" id="L3724">        zeroes.add(new PairInt(-3, -2)); zeroes.add(new PairInt(-3, -3));</span>
<span class="fc" id="L3725">        zeroes.add(new PairInt(-2, 1)); zeroes.add(new PairInt(-2, -2)); zeroes.add(new PairInt(-2, -3));</span>
<span class="fc" id="L3726">        zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -3));</span>
<span class="fc" id="L3727">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L3728">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, -1)); </span>
<span class="fc" id="L3729">        zeroes.add(new PairInt(1, -2)); zeroes.add(new PairInt(1, -3));</span>
        
<span class="fc" id="L3731">        ones.add(new PairInt(-2, 0)); ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L3732">        ones.add(new PairInt(-1, 1)); ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3733">        ones.add(new PairInt(0, -1)); ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L3734">        ones.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L3736">        changeToZeroes.add(new PairInt(-2, 0)); changeToZeroes.add(new PairInt(-2, -1));</span>
<span class="fc" id="L3737">        changeToZeroes.add(new PairInt(-1, 0)); changeToZeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3738">        changeToZeroes.add(new PairInt(0, -1)); changeToZeroes.add(new PairInt(0, -2));</span>
                    
<span class="fc" id="L3740">        int nCorrections = 0;</span>
        
<span class="fc" id="L3742">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3745">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3748">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3749">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3750">    }</span>
    
    private void correctForSingleHole_05(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*    
          0  0  0  0  0         3                           3
          0  0  #  #  0         2           .  .            2
          0  #  0  #  #         1        .  0  .  #         1
          #  #  #  #* 0         0        #  #  #*           0
          0  0  0  0  0        -1                          -1
         -3 -2 -1  0  1  2  3        -3 -2 -1  0  1  2  3  
        */
        
<span class="fc" id="L3764">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3765">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3766">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3767">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3770">        zeroes.add(new PairInt(-3, 1)); zeroes.add(new PairInt(-3, -1));</span>
<span class="fc" id="L3771">        zeroes.add(new PairInt(-3, -2)); zeroes.add(new PairInt(-3, -3));</span>
<span class="fc" id="L3772">        zeroes.add(new PairInt(-2, 1)); zeroes.add(new PairInt(-2, -2)); zeroes.add(new PairInt(-2, -3));</span>
<span class="fc" id="L3773">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -3));</span>
<span class="fc" id="L3774">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L3775">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, 0)); </span>
<span class="fc" id="L3776">        zeroes.add(new PairInt(1, -2)); zeroes.add(new PairInt(1, -3));</span>
        
<span class="fc" id="L3778">        ones.add(new PairInt(-3, 0));</span>
<span class="fc" id="L3779">        ones.add(new PairInt(-2, 0)); ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L3780">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3781">        ones.add(new PairInt(0, -1)); ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L3782">        ones.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L3784">        changeToZeroes.add(new PairInt(-2, -1));</span>
<span class="fc" id="L3785">        changeToZeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3786">        changeToZeroes.add(new PairInt(0, -1)); changeToZeroes.add(new PairInt(0, -2));</span>
                    
<span class="fc" id="L3788">        int nCorrections = 0;</span>
        
<span class="fc" id="L3790">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3793">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3796">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3797">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3798">    }</span>
    
    private void correctForSingleHole_06(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*    
          0  0  0  0  #         3                 #         3
          0  #  #  #            2        .  .  #            2
          0  #  0  #  0         1        .  @  .            1
          0  #  #  #* 0         0        #  .  .*           0
          0  #  0  0  0        -1        #                 -1
         -3 -2 -1  0  1  2  3        -3 -2 -1  0  1  2  3  
        */
        
<span class="fc" id="L3812">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3813">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3814">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3815">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3818">        zeroes.add(new PairInt(-3, 1)); zeroes.add(new PairInt(-3, 0)); zeroes.add(new PairInt(-3, -1));</span>
<span class="fc" id="L3819">        zeroes.add(new PairInt(-3, -2)); zeroes.add(new PairInt(-3, -3));</span>
<span class="fc" id="L3820">        zeroes.add(new PairInt(-2, -3));</span>
<span class="fc" id="L3821">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -3));</span>
<span class="fc" id="L3822">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L3823">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, 0)); </span>
<span class="fc" id="L3824">        zeroes.add(new PairInt(1, -1));</span>
        
<span class="fc" id="L3826">        ones.add(new PairInt(-2, 1)); ones.add(new PairInt(-2, 0)); </span>
<span class="fc" id="L3827">        ones.add(new PairInt(-2, -1)); ones.add(new PairInt(-2, -2));</span>
<span class="fc" id="L3828">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3829">        ones.add(new PairInt(0, -1)); ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L3830">        ones.add(new PairInt(1, -3));</span>
        
<span class="fc" id="L3832">        changeToZeroes.add(new PairInt(-2, -1)); changeToZeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L3833">        changeToZeroes.add(new PairInt(-1, 0)); changeToZeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L3834">        changeToZeroes.add(new PairInt(0, 0)); changeToZeroes.add(new PairInt(0, -1));</span>
                    
<span class="fc" id="L3836">        changeToOnes.add(new PairInt(-1, -1));</span>
        
<span class="fc" id="L3838">        int nCorrections = 0;</span>
        
<span class="fc" id="L3840">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3843">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3846">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3847">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3848">    }</span>
    
    private void correctForSingleHole_07(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*  
                 0  0  0  0  #      4                    #      4
              0  0  #  #  #         3           .  .  #         3
              0  #  #  0  #  0      2        .  .  @  .         2
              0  #  0  #  #  0      1        .  @  .  .         1
              0  #  #  #* 0  0      0        .  #  .*           0
              0  #  0  0  0        -1        #                 -1
             -3 -2 -1  0  1  2  3        -3 -2 -1  0  1  2  3  
        */
        
<span class="fc" id="L3863">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3864">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3865">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3866">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3869">        zeroes.add(new PairInt(-3, 1)); zeroes.add(new PairInt(-3, 0)); zeroes.add(new PairInt(-3, -1));</span>
<span class="fc" id="L3870">        zeroes.add(new PairInt(-3, -2)); zeroes.add(new PairInt(-3, -3));</span>
<span class="fc" id="L3871">        zeroes.add(new PairInt(-2, -3)); zeroes.add(new PairInt(-2, -4));</span>
<span class="fc" id="L3872">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -4));</span>
<span class="fc" id="L3873">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -2)); zeroes.add(new PairInt(0, -4));</span>
<span class="fc" id="L3874">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, 0)); </span>
<span class="fc" id="L3875">        zeroes.add(new PairInt(1, -4));</span>
<span class="fc" id="L3876">        zeroes.add(new PairInt(2, 0)); zeroes.add(new PairInt(2, -1)); zeroes.add(new PairInt(2, -2));</span>
        
<span class="fc" id="L3878">        ones.add(new PairInt(-2, 1)); ones.add(new PairInt(-2, 0)); </span>
<span class="fc" id="L3879">        ones.add(new PairInt(-2, -1)); ones.add(new PairInt(-2, -2));</span>
<span class="fc" id="L3880">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -2)); ones.add(new PairInt(-1, -3));</span>
<span class="fc" id="L3881">        ones.add(new PairInt(0, -1)); ones.add(new PairInt(0, -3));</span>
<span class="fc" id="L3882">        ones.add(new PairInt(1, -1)); ones.add(new PairInt(1, -2)); ones.add(new PairInt(1, -3));</span>
<span class="fc" id="L3883">        ones.add(new PairInt(2, -4));</span>
        
<span class="fc" id="L3885">        changeToZeroes.add(new PairInt(-2, 0)); changeToZeroes.add(new PairInt(-2, -1)); changeToZeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L3886">        changeToZeroes.add(new PairInt(-1, -2)); changeToZeroes.add(new PairInt(-1, -3));</span>
<span class="fc" id="L3887">        changeToZeroes.add(new PairInt(0, 0)); changeToZeroes.add(new PairInt(0, -1)); changeToZeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L3888">        changeToZeroes.add(new PairInt(1, -1)); changeToZeroes.add(new PairInt(1, -2));</span>
        
<span class="fc" id="L3890">        changeToOnes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L3891">        changeToOnes.add(new PairInt(0, -2));</span>
        
<span class="fc" id="L3893">        int nCorrections = 0;</span>
        
<span class="fc" id="L3895">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3898">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3901">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3902">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3903">    }</span>
    
    private void correctForSingleHole_08(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*  
                 0  0  0  0  #      4                    #      4
              0  0  #  #  #         3           .  .  #         3
           0  0  #  #  0  #  0      2        .  .  @  .         2
           0  #  #  0  #  #  0      1     .  .  @  .  .         1
           0  #  0  #  #* 0  0      0     .  @  .  .*           0
           0  #  #  #  0  0        -1     #  .  .              -1
           0  #  0  0              -2     #                    -2
          -4 -3 -2 -1  0  1  2  3        -3 -2 -1  0  1  2  3  
        */
        
<span class="fc" id="L3919">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3920">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3921">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3922">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3925">        zeroes.add(new PairInt(-4, 2)); zeroes.add(new PairInt(-4, 1)); zeroes.add(new PairInt(-4, 0));</span>
<span class="fc" id="L3926">        zeroes.add(new PairInt(-4, -1)); zeroes.add(new PairInt(-4, -2));</span>
<span class="fc" id="L3927">        zeroes.add(new PairInt(-3, -2)); zeroes.add(new PairInt(-3, -3));</span>
<span class="fc" id="L3928">        zeroes.add(new PairInt(-2, 2)); zeroes.add(new PairInt(-2, 0));</span>
<span class="fc" id="L3929">        zeroes.add(new PairInt(-2, -3)); zeroes.add(new PairInt(-2, -4));</span>
<span class="fc" id="L3930">        zeroes.add(new PairInt(-1, 2)); zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -4));</span>
<span class="fc" id="L3931">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -2)); zeroes.add(new PairInt(0, -4));</span>
<span class="fc" id="L3932">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, -4));</span>
<span class="fc" id="L3933">        zeroes.add(new PairInt(2, 0)); zeroes.add(new PairInt(2, -1)); zeroes.add(new PairInt(2, -2));</span>
        
<span class="fc" id="L3935">        ones.add(new PairInt(-3, 2)); ones.add(new PairInt(-3, 1)); </span>
<span class="fc" id="L3936">        ones.add(new PairInt(-3, 0)); ones.add(new PairInt(-3, -1));</span>
<span class="fc" id="L3937">        ones.add(new PairInt(-2, 1)); ones.add(new PairInt(-2, -1)); ones.add(new PairInt(-2, -2));</span>
<span class="fc" id="L3938">        ones.add(new PairInt(-1, 1)); ones.add(new PairInt(-1, 0)); </span>
<span class="fc" id="L3939">        ones.add(new PairInt(-1, -2)); ones.add(new PairInt(-1, -3));</span>
<span class="fc" id="L3940">        ones.add(new PairInt(0, -1)); ones.add(new PairInt(0, -3));</span>
<span class="fc" id="L3941">        ones.add(new PairInt(1, -1)); ones.add(new PairInt(1, -2)); ones.add(new PairInt(1, -3));</span>
<span class="fc" id="L3942">        ones.add(new PairInt(2, -4));</span>
        
<span class="fc" id="L3944">        changeToZeroes.add(new PairInt(-3, 0)); changeToZeroes.add(new PairInt(-3, -1));</span>
<span class="fc" id="L3945">        changeToZeroes.add(new PairInt(-2, 1)); changeToZeroes.add(new PairInt(-2, -1)); changeToZeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L3946">        changeToZeroes.add(new PairInt(-1, 1)); changeToZeroes.add(new PairInt(-1, 0)); </span>
<span class="fc" id="L3947">        changeToZeroes.add(new PairInt(-1, -2)); changeToZeroes.add(new PairInt(-1, -3));</span>
<span class="fc" id="L3948">        changeToZeroes.add(new PairInt(0, 0)); changeToZeroes.add(new PairInt(0, -1)); changeToZeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L3949">        changeToZeroes.add(new PairInt(1, -1)); changeToZeroes.add(new PairInt(1, -2));</span>
        
<span class="fc" id="L3951">        changeToOnes.add(new PairInt(-2, 0));</span>
<span class="fc" id="L3952">        changeToOnes.add(new PairInt(-1, -1));</span>
<span class="fc" id="L3953">        changeToOnes.add(new PairInt(0, -2));</span>
        
<span class="fc" id="L3955">        int nCorrections = 0;</span>
        
<span class="fc" id="L3957">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3960">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L3963">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L3964">            Integer.toString(nCorrections));</span>
<span class="fc" id="L3965">    }</span>
    
    private void correctForSingleHole_09(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*  
                                    4                           4
                 0  0  0  #  0      3                 #         3
                 0  #  #  #  0      2           .  #  #         2
                 0  #  0  #  0      1           #     #         1 
                 #  #  #* #  #      0        #  .  .* .  #      0
                    0  0  0        -1                          -1
                                   -2                          -2
          -4 -3 -2 -1  0  1  2  3        -3 -2 -1  0  1  2  3  
        */
        
<span class="fc" id="L3981">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3982">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3983">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L3984">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L3987">        zeroes.add(new PairInt(-2, -1)); zeroes.add(new PairInt(-2, -2)); zeroes.add(new PairInt(-2, -3));</span>
<span class="fc" id="L3988">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -4));</span>
<span class="fc" id="L3989">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L3990">        zeroes.add(new PairInt(1, 1));</span>
<span class="fc" id="L3991">        zeroes.add(new PairInt(2, -1)); zeroes.add(new PairInt(2, -2)); zeroes.add(new PairInt(2, -3));</span>
        
<span class="fc" id="L3993">        ones.add(new PairInt(-2, 0));</span>
<span class="fc" id="L3994">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -1)); ones.add(new PairInt(-1, -2)); </span>
<span class="fc" id="L3995">        ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L3996">        ones.add(new PairInt(1, 0)); ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L3997">        ones.add(new PairInt(1, -2)); ones.add(new PairInt(1, -3));</span>
<span class="fc" id="L3998">        ones.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L4000">        changeToZeroes.add(new PairInt(-1, 0)); changeToZeroes.add(new PairInt(-1, -2)); </span>
<span class="fc" id="L4001">        changeToZeroes.add(new PairInt(0, 0));</span>
<span class="fc" id="L4002">        changeToZeroes.add(new PairInt(1, 0));</span>
        
<span class="fc" id="L4004">        int nCorrections = 0;</span>
        
<span class="fc" id="L4006">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L4009">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L4012">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L4013">            Integer.toString(nCorrections));</span>
<span class="fc" id="L4014">    }</span>
    
    private void correctForSingleHole_10(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*
                     0 0        3                          3
                   0 # 0 0      2           # 0 .          2
                 # # 0 # 0 0    1           # # 0 .        1
                   # #*0 # 0    0             # #*0 .      0
                     # # #     -1               #         -1
        
        -6-5-4-3-2-1 0 1 2 3       -6-5-4-3-2-1 0 1 2 3
        */
        
<span class="fc" id="L4029">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L4030">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L4031">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L4032">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L4035">        zeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L4036">        zeroes.add(new PairInt(0, -1)); zeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L4037">        zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, -2)); zeroes.add(new PairInt(1, -3));</span>
<span class="fc" id="L4038">        zeroes.add(new PairInt(2, -1)); zeroes.add(new PairInt(2, -2));</span>
<span class="fc" id="L4039">        zeroes.add(new PairInt(3, 0)); zeroes.add(new PairInt(3, -1));</span>
        
<span class="fc" id="L4041">        ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L4042">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -1)); </span>
<span class="fc" id="L4043">        ones.add(new PairInt(0, 1)); ones.add(new PairInt(0, -2));</span>
<span class="fc" id="L4044">        ones.add(new PairInt(1, 1)); ones.add(new PairInt(1, -1));</span>
<span class="fc" id="L4045">        ones.add(new PairInt(2, 1)); ones.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L4047">        changeToZeroes.add(new PairInt(0, -2));</span>
<span class="fc" id="L4048">        changeToZeroes.add(new PairInt(1, -1));</span>
<span class="fc" id="L4049">        changeToZeroes.add(new PairInt(2, 0));</span>
        
<span class="fc" id="L4051">        int nCorrections = 0;</span>
        
<span class="fc" id="L4053">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L4056">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L4059">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L4060">            Integer.toString(nCorrections));</span>
<span class="fc" id="L4061">    }</span>
    
    private void correctForSingleHole_11(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*
                 0  0  0  #         4                 #         4
              0  0  #  #  #  0      3           .  .  #         3
              0  #  #  0  #  0      2        .  .  @  .         2
              0  #  0  #  #  0      1        .  @  .  .         1
              0  #  #  #* 0  0      0        #  .  .*           0
                 #  0  0  0        -1        #                 -1
             -3 -2 -1  0  1  2  3        -3 -2 -1  0  1  2  3
        */
        
<span class="fc" id="L4076">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L4077">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L4078">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L4079">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
       
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L4082">        zeroes.add(new PairInt(-3, 0)); zeroes.add(new PairInt(-3, -1));</span>
<span class="fc" id="L4083">        zeroes.add(new PairInt(-3, -2)); zeroes.add(new PairInt(-3, -3));</span>
<span class="fc" id="L4084">        zeroes.add(new PairInt(-2, -3)); zeroes.add(new PairInt(-2, -4));</span>
<span class="fc" id="L4085">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -4));</span>
<span class="fc" id="L4086">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -2)); zeroes.add(new PairInt(0, -4));</span>
<span class="fc" id="L4087">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, 0)); </span>
<span class="fc" id="L4088">        zeroes.add(new PairInt(2, 0)); zeroes.add(new PairInt(2, -1));</span>
<span class="fc" id="L4089">        zeroes.add(new PairInt(2, -2)); zeroes.add(new PairInt(2, -3));</span>
        
<span class="fc" id="L4091">        ones.add(new PairInt(-2, 1)); ones.add(new PairInt(-2, 0)); ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L4092">        ones.add(new PairInt(-2, -2)); </span>
<span class="fc" id="L4093">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -2)); ones.add(new PairInt(-1, -3)); </span>
<span class="fc" id="L4094">        ones.add(new PairInt(0, -1)); ones.add(new PairInt(0, -3));</span>
<span class="fc" id="L4095">        ones.add(new PairInt(1, -1)); ones.add(new PairInt(1, -2));</span>
<span class="fc" id="L4096">        ones.add(new PairInt(1, -3)); ones.add(new PairInt(1, -4));</span>
        
<span class="fc" id="L4098">        changeToZeroes.add(new PairInt(-2, -1)); changeToZeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L4099">        changeToZeroes.add(new PairInt(-1, 0)); changeToZeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L4100">        changeToZeroes.add(new PairInt(-1, -3));</span>
<span class="fc" id="L4101">        changeToZeroes.add(new PairInt(0, 0)); changeToZeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L4102">        changeToZeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L4103">        changeToZeroes.add(new PairInt(1, -1)); changeToZeroes.add(new PairInt(1, -2));</span>
        
<span class="fc" id="L4105">        changeToOnes.add(new PairInt(-1, -1)); changeToOnes.add(new PairInt(0, -2));</span>
        
<span class="fc" id="L4107">        int nCorrections = 0;</span>
        
<span class="fc" id="L4109">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L4112">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L4115">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L4116">            Integer.toString(nCorrections));</span>
<span class="fc" id="L4117">    }</span>
    
    private void correctForSingleHole_12(Set&lt;PairInt&gt; points, int imageWidth, 
        int imageHeight) {
        
        /*
                 0  0  0  0  #      4                   #       4
              0  0  #  #  #  #      3           .  .  # .       3
              0  #  #  0  #  0      2        .  .  @  .         2
              0  #  0  #  #  0      1        .  @  .  .         1
              0  #  #  #* 0  0      0        #  .  .*           0
                 #  0  0  0        -1        #                 -1
             -3 -2 -1  0  1  2  3        -3 -2 -1  0  1  2  3
        */
        
<span class="fc" id="L4132">        LinkedHashSet&lt;PairInt&gt; ones = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L4133">        LinkedHashSet&lt;PairInt&gt; zeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L4134">        LinkedHashSet&lt;PairInt&gt; changeToZeroes = new LinkedHashSet&lt;PairInt&gt;();</span>
<span class="fc" id="L4135">        LinkedHashSet&lt;PairInt&gt; changeToOnes = new LinkedHashSet&lt;PairInt&gt;();</span>
  
        // y's are inverted here because sketch above is top left is (0,0)
<span class="fc" id="L4138">        zeroes.add(new PairInt(-3, 0)); zeroes.add(new PairInt(-3, -1));</span>
<span class="fc" id="L4139">        zeroes.add(new PairInt(-3, -2)); zeroes.add(new PairInt(-3, -3));</span>
<span class="fc" id="L4140">        zeroes.add(new PairInt(-2, -3)); zeroes.add(new PairInt(-2, -4));</span>
<span class="fc" id="L4141">        zeroes.add(new PairInt(-1, 1)); zeroes.add(new PairInt(-1, -1)); zeroes.add(new PairInt(-1, -4));</span>
<span class="fc" id="L4142">        zeroes.add(new PairInt(0, 1)); zeroes.add(new PairInt(0, -2)); zeroes.add(new PairInt(0, -4));</span>
<span class="fc" id="L4143">        zeroes.add(new PairInt(1, 1)); zeroes.add(new PairInt(1, 0)); zeroes.add(new PairInt(1, -4)); </span>
<span class="fc" id="L4144">        zeroes.add(new PairInt(2, 0)); zeroes.add(new PairInt(2, -1));</span>
<span class="fc" id="L4145">        zeroes.add(new PairInt(2, -2));</span>
        
<span class="fc" id="L4147">        ones.add(new PairInt(-2, 1)); ones.add(new PairInt(-2, 0)); ones.add(new PairInt(-2, -1));</span>
<span class="fc" id="L4148">        ones.add(new PairInt(-2, -2));</span>
<span class="fc" id="L4149">        ones.add(new PairInt(-1, 0)); ones.add(new PairInt(-1, -2)); ones.add(new PairInt(-1, -3)); </span>
<span class="fc" id="L4150">        ones.add(new PairInt(0, -1)); ones.add(new PairInt(0, -3));</span>
<span class="fc" id="L4151">        ones.add(new PairInt(1, -1)); ones.add(new PairInt(1, -2)); </span>
<span class="fc" id="L4152">        ones.add(new PairInt(1, -3)); </span>
<span class="fc" id="L4153">        ones.add(new PairInt(2, -3)); ones.add(new PairInt(2, -4));</span>
        
        /*
                 0  0  0  0  #      4                    #      4
              0  0  #  #  #  #      3           .  .  #  .      3
              0  #  #  0  #  0      2        .  .  @  .         2
              0  #  0  #  #  0      1        .  @  .  .         1
              0  #  #  #* 0  0      0        #  .  .*           0
                 #  0  0  0        -1        #                 -1
             -3 -2 -1  0  1  2  3        -3 -2 -1  0  1  2  3
        */
<span class="fc" id="L4164">        changeToZeroes.add(new PairInt(-2, -1)); changeToZeroes.add(new PairInt(-2, -2));</span>
<span class="fc" id="L4165">        changeToZeroes.add(new PairInt(-1, 0)); changeToZeroes.add(new PairInt(-1, -2));</span>
<span class="fc" id="L4166">        changeToZeroes.add(new PairInt(-1, -3));</span>
<span class="fc" id="L4167">        changeToZeroes.add(new PairInt(0, 0)); changeToZeroes.add(new PairInt(0, -1));</span>
<span class="fc" id="L4168">        changeToZeroes.add(new PairInt(0, -3));</span>
<span class="fc" id="L4169">        changeToZeroes.add(new PairInt(1, -1)); changeToZeroes.add(new PairInt(1, -2));</span>
<span class="fc" id="L4170">        changeToZeroes.add(new PairInt(2, -3));</span>
        
<span class="fc" id="L4172">        changeToOnes.add(new PairInt(-1, -1)); changeToOnes.add(new PairInt(0, -2));</span>
        
<span class="fc" id="L4174">        int nCorrections = 0;</span>
        
<span class="fc" id="L4176">        nCorrections += replacePattern(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L4179">        nCorrections += rotate90ThreeTimes(points, imageWidth, imageHeight,</span>
            zeroes, ones, changeToZeroes, changeToOnes);
        
<span class="fc" id="L4182">        log.fine(&quot;method &quot; + MiscDebug.getInvokingMethodName() + &quot; nc=&quot; + </span>
<span class="fc" id="L4183">            Integer.toString(nCorrections));</span>
<span class="fc" id="L4184">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>